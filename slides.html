<!DOCTYPE html>
<html lang="en"><head>
<script src="slides_files/libs/quarto-html/tabby.min.js"></script>
<script src="slides_files/libs/quarto-html/popper.min.js"></script>
<script src="slides_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="slides_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="slides_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="slides_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="slides_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.549">

  <meta name="author" content="Matteo Francia   DISI — University of Bologna   m.francia@unibo.it">
  <title>Big Data and Cloud Platforms (Module 2)</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="slides_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="slides_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="slides_files/libs/revealjs/dist/theme/quarto.css">
  <link href="slides_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="slides_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="slides_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="slides_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Big Data and Cloud Platforms (Module 2)</h1>
  <p class="subtitle">Data pipelines on cloud (Computing)</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Matteo Francia <br> DISI — University of Bologna <br> m.francia@unibo.it 
</div>
</div>
</div>

</section>
<section id="section" class="title-slide slide level1 center">
<h1></h1>

<img data-src="imgs/281.svg" class="r-stretch"></section>

<section id="supporting-data-pipelines" class="title-slide slide level1 center">
<h1>Supporting data pipelines</h1>
<p>We can choose the XaaS configuration to build our pipelines</p>
<div class="columns">
<div class="column" style="width:60%;">
<p>IaaS</p>
<ul>
<li>Outsource virtual machines to the cloud (AWS EC2)</li>
<li>(You) Manage technological and business challenges</li>
</ul>
</div><div class="column" style="width:60%;">
<p><img data-src="imgs/slides197.png"></p>
</div>
</div>
<div class="columns">
<div class="column" style="width:60%;">
<p>PaaS</p>
<ul>
<li>Outsource the data ecosystem to the cloud (e.g., AWS EMR)</li>
<li>(You) Manage business challenges</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/slides198.png"></p>
</div>
</div>
<p><a href="https://aws.amazon.com/emr">https://aws.amazon.com/ec2</a></p>
<p><a href="https://aws.amazon.com/emr">https://aws.amazon.com/emr</a> (2022-11-15)</p>
</section>

<section id="single-instance-aws-ec2" class="title-slide slide level1 center">
<h1>Single instance: AWS EC2</h1>
<div class="columns">
<div class="column" style="width:60%;">
<p>Amazon Elastic Compute Cloud</p>
<ul>
<li>A web service that provides resizable compute capacity</li>
<li>Complete control of computing resources
<ul>
<li>Processor, storage, networking, OS, and purchase model</li>
</ul></li>
</ul>
<p>The <strong>instance type</strong> determines the hardware</p>
<ul>
<li>Different compute and memory capabilities</li>
</ul>
<p><strong>Amazon Machine Image</strong> is a software template</p>
<ul>
<li>The EC2 instance is used for creating the virtual server instance</li>
<li>The AMI is the EC2 virtual machines image</li>
</ul>
<p>Interact with EC2 instance as with any computer</p>
<ul>
<li>You have complete control of your instances</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/slides199.png"></p>
</div>
</div>
<p><a href="https://aws.amazon.com/ec2/instance-types">https://aws.amazon.com/ec2/instance-types</a></p>
<p><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instances-and-amis.html">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instances-and-amis.html</a></p>
<p><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/compute-optimized-instances.html">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/compute-optimized-instances.html</a></p>
</section>

<section id="single-instance-aws-ec2-1" class="title-slide slide level1 center">
<h1>Single instance: AWS EC2</h1>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="imgs/slides200.png"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="imgs/slides201.png"></p>
</div>
</div>
<p><a href="https://aws.amazon.com/ec2/instance-types/">https://aws.amazon.com/ec2/instance-types/</a></p>
</section>

<section id="cluster-aws-emr" class="title-slide slide level1 center">
<h1>Cluster: AWS EMR</h1>
<p>Amazon EMR is a data platform based on the Hadoop stack</p>
<ul>
<li>Apache Spark, Apache Hive, Apache HBase, etc.</li>
<li>You can run workloads on
<ul>
<li>Amazon EC2 instances</li>
<li>Amazon Elastic Kubernetes Service (EKS)&nbsp;clusters</li>
</ul></li>
</ul>
<p>Example of workload</p>
<ul>
<li>Upload input data into Amazon S3</li>
<li>EMR launches EC2 instances that you specified</li>
<li>EMR begins the execution while pulling the input data from S3 into the launched instances</li>
<li>Once the cluster is finished, EMR transfers output data to Amazon S3</li>
</ul>
</section>

<section id="aws-emr" class="title-slide slide level1 center">
<h1>AWS EMR</h1>
<p>Deploy Multiple Clusters</p>
<div class="columns">
<div class="column" style="width:60%;">
<p>Provision as much capacity as you need</p>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/288a.svg"></p>
</div>
</div>
<div class="columns">
<div class="column" style="width:60%;">
<p>Add or remove capacity at any time</p>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/288b.svg"></p>
</div>
</div>
</section>

<section id="aws-emr-1" class="title-slide slide level1 center">
<h1>AWS EMR</h1>
<div class="columns">
<div class="column" style="width:60%;">
<p>EMR cluster</p>
<ul>
<li>Master group controls the cluster</li>
<li>Coordinate the work distribution</li>
<li>Manage the cluster state</li>
</ul>
<p>Core groups</p>
<ul>
<li>Core instances run Data Node daemons</li>
</ul>
<p>(Optional) Task instances</p>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/289.svg"></p>
</div>
</div>
</section>

<section id="aws-emr-2" class="title-slide slide level1 center">
<h1>AWS EMR</h1>
<p>The central component of Amazon EMR is the <strong>cluster</strong></p>
<ul>
<li>A collection of <strong>Amazon Elastic Compute Cloud (Amazon EC2)</strong> instances</li>
<li>Each instance is called a <strong>node</strong></li>
</ul>
<p>The <strong>node type </strong> identifies the role within the cluster</p>
<ul>
<li><strong>Master</strong> node coordinates the distribution of data and tasks among other nodes
<ul>
<li>Every cluster has (at least) a master node</li>
<li>Always active</li>
</ul></li>
<li><strong>Core</strong> node runs tasks and store data in the Hadoop Distributed File System (HDFS)
<ul>
<li>Multi-node clusters have at least one core node</li>
<li>Always active, contains the data node daemon</li>
</ul></li>
<li><strong>Task</strong> node only runs tasks
<ul>
<li>Task nodes are optional</li>
<li>Decoupling processing and storage, we lose data locality</li>
</ul></li>
</ul>
</section>

<section id="aws-emr-3" class="title-slide slide level1 center">
<h1>AWS EMR</h1>
<p>On-Demand Instance</p>
<ul>
<li>Pay for compute capacity by the hour (minimum of 60 seconds)</li>
<li>No long-term commitments</li>
</ul>
<p>Spot Instance</p>
<ul>
<li>Unused EC2 instance that is available for less than the on-demand price</li>
<li>Hourly price is called <em>spot price</em>
<ul>
<li>Adjusted based on long-term supply and demand for spot instances</li>
</ul></li>
<li>Run the instance when capacity is available and price is below threshold
<ul>
<li>When data-center resources are low, spot instances are dropped</li>
<li>Mainly suitable for batch workloads</li>
</ul></li>
</ul>
<p><a href="https://aws.amazon.com/ec2/pricing/">https://aws.amazon.com/ec2/pricing/</a></p>
</section>

<section id="aws-emr-4" class="title-slide slide level1 center">
<h1>AWS EMR</h1>
<p>Spot Instance cost strategies</p>
<ul>
<li><em>Capacity-optimized strategy</em></li>
<li>Allocated instances into the most available pools</li>
<li>Look at real-time capacity data, predict which are the most available</li>
<li>Works well for workloads such as big data and analytics</li>
<li>Works well when we have high cost of interruption</li>
</ul>
<p><em>Lowest-price strategy</em></p>
<ul>
<li>Allocates instances in pools with lowest price at time of fulfillment</li>
</ul>
</section>

<section id="creating-the-cluster" class="title-slide slide level1 center">
<h1>Creating the cluster</h1>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="imgs/slides288.png"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="imgs/slides289.png"></p>
</div>
</div>
</section>

<section id="creating-the-cluster-1" class="title-slide slide level1 center">
<h1>Creating the cluster</h1>
<p>Choose to launch <strong>master</strong>, <strong>core</strong>, or <strong>task</strong> on Spot Instances</p>
<ul>
<li>The <strong>master</strong> node controls the cluster
<ul>
<li>When terminated, the cluster ends</li>
<li>Use <em>spot instances</em> if you are running a cluster where sudden termination is acceptable</li>
</ul></li>
<li><strong>Core </strong> nodes process data and store information using HDFS
<ul>
<li>When terminated, data is lost</li>
<li>Use <em>spot instances</em> when partial HDFS data loss is tolerable</li>
</ul></li>
<li><strong>Task </strong> nodes process data but do not hold persistent data in HDFS
<ul>
<li>When terminated, computational capacity is lost</li>
<li>The effect of spot instances on the cluster is “minimal”</li>
</ul></li>
</ul>
<p><a href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-plan-instances-guidelines.html">https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-plan-instances-guidelines.html</a></p>
</section>

<section id="creating-the-cluster-2" class="title-slide slide level1 center">
<h1>Creating the cluster</h1>

<img data-src="imgs/slides290.png" class="r-stretch"></section>

<section id="creating-the-cluster-3" class="title-slide slide level1 center">
<h1>Creating the cluster</h1>
<p>Amazon EMR provides two main file systems</p>
<ul>
<li><strong>HDFS</strong> and <strong>EMRFS</strong>, specify which file system to use by the prefix</li>
<li>hdfs://path (or just <code>path</code>)
<ul>
<li>HDFS is used by the master and core nodes</li>
<li><em>AWS EBS volume storage is used for HDFS data</em></li>
<li>Is fast, best used for caching the results produced by intermediate job-flow steps, <em>why?</em></li>
<li>It’s ephemeral storage which is reclaimed when the cluster ends</li>
</ul></li>
<li>s3://DOC-EXAMPLE-BUCKET1/path (EMRFS)
<ul>
<li>An implementation of the Hadoop file system atop Amazon S3</li>
<li>We can avoid EBS storage</li>
</ul></li>
</ul>
<p><a href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-plan-storage.html">https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-plan-storage.html</a></p>
</section>

<section id="creating-the-cluster-4" class="title-slide slide level1 center">
<h1>Creating the cluster</h1>

<img data-src="imgs/slides291.png" class="r-stretch"></section>

<section id="creating-the-cluster-5" class="title-slide slide level1 center">
<h1>Creating the cluster</h1>

<img data-src="imgs/slides292.png" class="r-stretch"></section>

<section id="creating-the-cluster-6" class="title-slide slide level1 center">
<h1>Creating the cluster</h1>

<img data-src="imgs/slides293.png" class="r-stretch"></section>

<section id="creating-the-cluster-7" class="title-slide slide level1 center">
<h1>Creating the cluster</h1>

<img data-src="imgs/slides294.png" class="r-stretch"></section>

<section id="creating-the-cluster-8" class="title-slide slide level1 center">
<h1>Creating the cluster</h1>
<p>Using CLI (command line interface)</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource bash number-lines"><code class="sourceCode bash"><span id="cb1-1"><a href=""></a><span class="ex">aws</span> emr create-cluster <span class="at">--auto-scaling-role</span> EMR_AutoScaling_DefaultRole <span class="at">--termination-protected</span> <span class="at">--applications</span> Name=Hadoop Name=Hive Name=Hue Name=JupyterEnterpriseGateway Name=Spark <span class="at">--ebs-root-volume-size</span> 10 <span class="at">--ec2-attributes</span> <span class="st">'{"KeyName":"bigdata","InstanceProfile":"EMR_EC2_DefaultRole","SubnetId":"subnet-5fa2f912","EmrManagedSlaveSecurityGroup":"sg-07818b5690a50b3f1","EmrManagedMasterSecurityGroup":"sg-0e2f5550a2cb98f79"}'</span> <span class="at">--service-role</span> EMR_DefaultRole <span class="at">--enable-debugging</span> <span class="at">--release-label</span> emr-6.2.0 <span class="at">--log-uri</span> <span class="st">'s3n://aws-logs-604905954159-us-east-1/elasticmapreduce/'</span> <span class="at">--name</span> <span class="st">'BigData'</span> <span class="at">--instance-groups</span> <span class="st">'[{"InstanceCount":1,"BidPrice":"OnDemandPrice","EbsConfiguration":{"EbsBlockDeviceConfigs":[{"VolumeSpecification":{"SizeInGB":32,"VolumeType":"gp2"},"VolumesPerInstance":2}]},"InstanceGroupType":"MASTER","InstanceType":"m4.xlarge","Name":"Master - 1"},{"InstanceCount":1,"BidPrice":"OnDemandPrice","EbsConfiguration":{"EbsBlockDeviceConfigs":[{"VolumeSpecification":{"SizeInGB":32,"VolumeType":"gp2"},"VolumesPerInstance":2}]},"InstanceGroupType":"CORE","InstanceType":"m4.xlarge","Name":"Core - 2"}]'</span> <span class="at">--scale-down-behavior</span> TERMINATE_AT_TASK_COMPLETION <span class="at">--region</span> us-east-1</span></code></pre></div>
</section>

<section id="cluster-lifecycle" class="title-slide slide level1 center">
<h1>Cluster lifecycle</h1>
<p>Creating a cluster (it takes ~10 minutes)</p>
<ul>
<li>A cluster cannot be stopped</li>
<li>It can only be terminated</li>
</ul>

<img data-src="imgs/slides295.png" class="r-stretch"><p>STARTING: EMR provisions EC2 instances for each required instance</p>
<ul>
<li>BOOTSTRAPPING: EMR runs actions that you specify on each instance</li>
<li>E.g., install custom applications and perform customizations</li>
</ul>
<p>Amazon EMR installs the native applications</p>
<ul>
<li>E.g., Hive, Hadoop, Spark, and so on</li>
</ul>
<p>RUNNING: a step for the cluster is currently being run</p>
<ul>
<li>Cluster sequentially runs any steps that you specified when you created the cluster</li>
</ul>
<p>WAITING: after steps run successfully</p>
<ul>
<li>TERMINATING: after manual shut down</li>
<li><em>Any data stored on the cluster is deleted</em></li>
</ul>
<p>A <strong>step</strong> is a user-defined unit of processing</p>
<ul>
<li>E.g., one algorithm that manipulates the data</li>
</ul>
<p>Step states</p>
<ul>
<li>PENDING: The step is waiting to be run</li>
<li>RUNNING: The step is currently running</li>
<li>COMPLETED: The step completed successfully</li>
<li>CANCELLED: The step was cancelled before running because an earlier step failed</li>
<li>FAILED: The step failed while running</li>
</ul>
</section>

<section id="running-the-cluster" class="title-slide slide level1 center">
<h1>Running the cluster</h1>
<p><img data-src="imgs/slides296.png"></p>
<p><img data-src="imgs/slides297.png"></p>
</section>

<section id="running-a-notebook" class="title-slide slide level1 center">
<h1>Running a notebook</h1>
<p><img data-src="imgs/slides298.png"></p>
<p><img data-src="imgs/slides299.png"></p>
<p><img data-src="imgs/slides300.png"></p>
</section>

<section id="running-a-spark-job" class="title-slide slide level1 center">
<h1>Running a Spark Job</h1>
<p>Connect using SSH</p>
<p>Install git</p>
<p>Clone &amp; build the project</p>
<p>ssh -i ~/bigdata.pem <a href="mailto:hadoop@ec2-54-242-176-32.compute-1.amazonaws.com">hadoop@ec2-54-242-176-32.compute-1.amazonaws.com</a></p>
<p>sudo yum install git -y</p>
<p>git clone <a href="https://github.com/w4bo/spark-word-count.git">https://github.com/w4bo/spark-word-count.git</a></p>
<p>cd spark-word-count</p>
<p>./gradlew</p>
<p>spark-submit –class it.unibo.big.WordCount build/libs/WordCount-all.jar s3://aws-bucket-bigdata2021/inferno.txt</p>
</section>

<section id="other-services-hue" class="title-slide slide level1 center">
<h1>Other services: HUE</h1>
<p>Connecting to Hue</p>
<ul>
<li>I.e., connecting to any HTTP interface hosted on the master node of a cluster</li>
</ul>
<p>To view the Hue web user interface</p>
<ul>
<li>Set Up an SSH Tunnel to the Master Node Using Dynamic Port Forwarding</li>
<li>Type the following address in your browser to open the Hue web interface
<ul>
<li><a href="http://master-public-dns:8888/">http://master-public-DNS:8888</a></li>
<li>Where master-public-DNS is the public DNS name of the master node</li>
</ul></li>
<li>If you are the administrator logging in for the first time
<ul>
<li>Enter a username and password to create your Hue superuser account</li>
<li>Otherwise, type your username and password and select Create account</li>
</ul></li>
</ul>

<img data-src="imgs/slides301.png" class="r-stretch"></section>

<section id="set-up-an-ssh-tunnel" class="title-slide slide level1 center">
<h1>Set Up an SSH Tunnel</h1>
<p><img data-src="imgs/slides302.png"></p>
<p><img data-src="imgs/slides303.png"></p>
<p><img data-src="imgs/slides304.png"></p>
</section>

<section id="connect-to-hue" class="title-slide slide level1 center">
<h1>Connect to HUE</h1>
<p><img data-src="imgs/slides305.png"></p>
<p><img data-src="imgs/slides306.png"></p>
</section>

<section id="connect-using-ssh" class="title-slide slide level1 center">
<h1>Connect using SSH</h1>
<p><img data-src="imgs/slides307.png"></p>
<p><img data-src="imgs/slides308.png"></p>
</section>

<section id="section-1" class="title-slide slide level1 center">
<h1></h1>

<img data-src="imgs/slides309.png" class="r-stretch"></section>

<section id="newsection" class="title-slide slide level1 center">
<h1>– newsection –</h1>

</section>

<section id="cluster-migration---based-on-a-true-story" class="title-slide slide level1 center">
<h1>Cluster migration - Based on a true story​</h1>

</section>

<section id="migration" class="title-slide slide level1 center">
<h1>Migration</h1>
<p>Goals</p>
<ul>
<li>Evaluating the costs for a cloud/on-premises data platform</li>
<li>Real-world case study</li>
<li>Fill in this table</li>
</ul>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Cost</th>
<th style="text-align: center;">On-premises</th>
<th style="text-align: center;">On cloud</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Hardware</td>
<td style="text-align: center;">?</td>
<td style="text-align: center;">?</td>
</tr>
<tr class="even">
<td style="text-align: center;">Software</td>
<td style="text-align: center;">?</td>
<td style="text-align: center;">?</td>
</tr>
</tbody>
</table>
</section>

<section id="case-study" class="title-slide slide level1 center">
<h1>Case study</h1>
<p>Business intelligence group</p>
</section>

<section id="migration-1" class="title-slide slide level1 center">
<h1>Migration</h1>
<p>Spatial Cube (PostGIS)</p>
<p>Reference architecture</p>
<p><img data-src="imgs/slides310.png"></p>
<p>Mobile Interface</p>
<p>ODS (Hbase+PostGIS)</p>
<p>Integration processes</p>
<p>Loading processes</p>
<p>Notebook Interface</p>
<p>Data Lake (Hadoop)</p>
<p>Enrichment processes</p>
<p>Acquisition processes</p>
<p><em>External sources</em></p>
<p><img data-src="imgs/slides311.png"></p>
<p><img data-src="imgs/slides312.png"></p>
<p><img data-src="imgs/slides313.png"></p>
<p><img data-src="imgs/slides314.png"></p>
<p><img data-src="imgs/slides315.png"></p>
<p><img data-src="imgs/slides316.png"></p>
<p>Administrative</p>
<p>borders</p>
<p>Rural Land</p>
<p>register</p>
<p>Satelliteimages</p>
<p>On-the-field sensors</p>
<p>Reference architecture</p>
<p><img data-src="imgs/slides317.png"></p>
<p>Hardware</p>
<ul>
<li>Software</li>
<li>“Classic” Hadoop stack</li>
</ul>
<p>8 CPUs (144 total)</p>
<ul>
<li><ul>
<li>Intel(R) Core(TM) i7-8700 CPU @ 3.20GHz</li>
</ul></li>
</ul>
<p>32GB RAM (576GB total)</p>
<ul>
<li><ul>
<li>2 x 16GB DIMM DDR4 2666 MHz</li>
</ul></li>
</ul>
<p>12TB HDD Disk (216TB total)</p>
<ul>
<li><ul>
<li>3 x 4TB ST4000DM004-2CV1</li>
</ul></li>
</ul>
<p><img data-src="imgs/slides318.png"></p>
<p><img data-src="imgs/slides319.png"></p>
<p><img data-src="imgs/slides320.png"></p>
<p><img data-src="imgs/slides321.png"></p>
<p><img data-src="imgs/slides322.png"></p>
<p><img data-src="imgs/slides323.png"></p>
<p><img data-src="imgs/slides324.png"></p>
<p><img data-src="imgs/slides325.png"></p>
<p><img data-src="imgs/slides326.png"></p>
<p><img data-src="imgs/slides327.png"></p>
<p><img data-src="imgs/slides328.png"></p>
<p><img data-src="imgs/slides329.png"></p>
<p><img data-src="imgs/slides330.png"></p>
<p><img data-src="imgs/slides331.png"></p>
<p><img data-src="imgs/slides332.png"></p>
<p><img data-src="imgs/slides333.png"></p>
<p><img data-src="imgs/slides334.png"></p>
<p><img data-src="imgs/slides335.png"></p>
<p><img data-src="imgs/slides336.png"></p>
<p><img data-src="imgs/slides337.png"></p>
<p>lshw -short -C cpu</p>
<p>lshw -short -C memory</p>
<p>lshw -short -C disk</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">SOLonprem</th>
<th style="text-align: center;">On-premises</th>
<th style="text-align: center;">On cloud</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Hardware</td>
<td style="text-align: center;">?</td>
<td style="text-align: center;">?</td>
</tr>
<tr class="even">
<td style="text-align: center;">Software</td>
<td style="text-align: center;">?</td>
<td style="text-align: center;">?</td>
</tr>
</tbody>
</table>
<p><strong>Hardware cost</strong>:?</p>
<ul>
<li>Refer to <a href="https://www.rect.coreto-europe.com/en/search.html?clearsearch=1">https://www.rect.coreto-europe.com/en/search.html?clearsearch=1</a></li>
</ul>
</section>

<section id="on-premises" class="title-slide slide level1 center">
<h1>On-premises</h1>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">SOLonprem</th>
<th style="text-align: center;">On-premises</th>
<th style="text-align: center;">On cloud</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Hardware</td>
<td style="text-align: center;">10602€/year</td>
<td style="text-align: center;">?</td>
</tr>
<tr class="even">
<td style="text-align: center;">Software</td>
<td style="text-align: center;">?</td>
<td style="text-align: center;">?</td>
</tr>
</tbody>
</table>
<p><strong>Hardware cost</strong>(up to Mar 05, 2021): * 1767€ x 18 = 31806€</p>
<ul>
<li>Amortization over 3 years (i.e., <em>10602€/year</em>)</li>
</ul>

<img data-src="imgs/slides338.png" class="r-stretch"><p><a href="https://www.rect.coreto-europe.com/en">https://www.rect.coreto-europe.com/en</a> (Accessed 2021-08-01)</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">SOLonprem</th>
<th style="text-align: center;">On-premises</th>
<th style="text-align: center;">On cloud</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Hardware</td>
<td style="text-align: center;">10602€/year</td>
<td style="text-align: center;">?</td>
</tr>
<tr class="even">
<td style="text-align: center;">Software</td>
<td style="text-align: center;">?</td>
<td style="text-align: center;">?</td>
</tr>
</tbody>
</table>
<p><strong>Software cost</strong>:?</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">SOLonprem</th>
<th style="text-align: center;">On-premises</th>
<th style="text-align: center;">On cloud</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Hardware</td>
<td style="text-align: center;">10602€/year</td>
<td style="text-align: center;">?</td>
</tr>
<tr class="even">
<td style="text-align: center;">Software</td>
<td style="text-align: center;">0€</td>
<td style="text-align: center;">?</td>
</tr>
</tbody>
</table>
<p><strong>Software cost</strong> (up to 2020): 0€*</p>
<ul>
<li>Free Cloudera Management System</li>
<li>No software licensing (for research purpose)</li>
</ul>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">SOLonprem</th>
<th style="text-align: center;">On-premises</th>
<th style="text-align: center;">On cloud</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Hardware</td>
<td style="text-align: center;">10602€/year</td>
<td style="text-align: center;">?</td>
</tr>
<tr class="even">
<td style="text-align: center;">Software</td>
<td style="text-align: center;">180000€/year</td>
<td style="text-align: center;">?</td>
</tr>
</tbody>
</table>
<p><strong>Software cost</strong>(up to Mar 05, 2021): 10000€/year x 18 = 180000€/year*</p>
<ul>
<li>Cloudera is no more free, 10K€ per node</li>
<li><a href="https://www.cloudera.com/products/pricing.html#private-cloud-services">https://www.cloudera.com/products/pricing.html#private-cloud-services</a></li>
<li><a href="https://www.cloudera.com/products/pricing/product-features.html">https://www.cloudera.com/products/pricing/product-features.html</a></li>
<li>No license for research purpose</li>
</ul>
<p><em>“Houston we’ve had a problem!”</em></p>
<ul>
<li>We cannot update/extend the cluster anymore</li>
<li>What about migrating to the cloud? (we only consider AWS)</li>
</ul>
</section>

<section id="migration-2" class="title-slide slide level1 center">
<h1>Migration</h1>
<p>Moving a Hadoop cluster to the cloud (we only consider AWS)</p>
<ul>
<li>AWS price calculator <a href="https://calculator.aws/#/estimate">https://calculator.aws/#/estimate</a></li>
</ul>
<p>How do we start?</p>
<ul>
<li>We have already defined the hardware and the software stack</li>
<li>Start with coarse tuning, identify the dominating costs first
<ul>
<li>Is it computing, storage, or processing?</li>
</ul></li>
<li>Identify a suitable budget, implement, refine later
<ul>
<li>Wrong refinements can do a lot of damage</li>
</ul></li>
</ul>
</section>

<section id="on-cloud-v1" class="title-slide slide level1 center">
<h1>On cloud v1</h1>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">SOLcloud1</th>
<th style="text-align: center;">On-premises</th>
<th style="text-align: center;">On cloud</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Hardware</td>
<td style="text-align: center;">10602€/year</td>
<td style="text-align: center;">?</td>
</tr>
<tr class="even">
<td style="text-align: center;">Software</td>
<td style="text-align: center;">180000€/year</td>
<td style="text-align: center;">?</td>
</tr>
</tbody>
</table>
<p>Migrating the cluster as-is:?</p>
<ul>
<li>Hint: add 18 EC2 instances satisfying the hardware requirements</li>
</ul>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">SOLcloud1</th>
<th style="text-align: center;">On-premises</th>
<th style="text-align: center;">On cloud</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Hardware</td>
<td style="text-align: center;">10602€/year</td>
<td style="text-align: center;">162000$/year</td>
</tr>
<tr class="even">
<td style="text-align: center;">Software</td>
<td style="text-align: center;">180000€/year</td>
<td style="text-align: center;">?</td>
</tr>
</tbody>
</table>
<p>SOLcloud1 migrating the cluster as-is: <em>13500<span class="math inline">\(/month = 162000\)</span>/year</em></p>
<ul>
<li>18 EC2 instances (t4g.2xlarge) with 12TB EBS storage each machine</li>
<li>Still, we have no software configuration</li>
</ul>
<p>Prices change over the year</p>
<ul>
<li>In 2022, 162000$/year</li>
<li>In 2023, 146000$/year</li>
</ul>

<img data-src="imgs/slides339.png" class="r-stretch"><p><a href="https://calculator.aws/#/estimate?id=7757afffccc3cafdcfdeb212b74623ef02ed5a36">https://calculator.aws/#/estimate?id=7757afffccc3cafdcfdeb212b74623ef02ed5a36</a></p>
</section>

<section id="migration-3" class="title-slide slide level1 center">
<h1>Migration</h1>
<p>Pay attention to the region</p>
<ul>
<li>Different regions, different prices</li>
<li>Different regions, different services</li>
<li>Remember the GDPR and data locality</li>
</ul>
<p><img data-src="imgs/slides340.png"></p>
<p>It makes no sense to move the cluster as-is</p>
<ul>
<li>More machines ensure better (on-prem) scalability but higher costs</li>
</ul>
<p>How do we proceed with the migration?</p>
<ul>
<li>We need minimum software requirements</li>
<li>Try to achieve the smallest migration impact
<ul>
<li>Find the most similar cloud-based solution to a Hadoop cluster</li>
<li>Rethink applications (later) when you got the know-how</li>
</ul></li>
<li>Identify a suitable budget, implement, refine later
<ul>
<li>Wrong refinements can do a lot of damage</li>
</ul></li>
</ul>
<p><strong>HDFS</strong></p>
<ul>
<li>How much durability do we need?
<ul>
<li>HP0: three replicas (we stick to this)</li>
<li>HP1: decrease replicas for cold data</li>
<li>HP2: move cold data to glacier or delete id</li>
<li>…</li>
</ul></li>
</ul>
<p><strong>HBase</strong> has marginal effects on the pricing (100GB &lt;&lt; 50TB)</p>
<ul>
<li>For simplicity, we can omit it</li>
</ul>
<p><strong>Overall</strong>: 50TB storage/year</p>
<p><img data-src="imgs/slides341.png"></p>
<p>Processing takes place each time that ESA provides a satellite image</p>
<ul>
<li>Some days no images are available</li>
<li>Some days up to 10 images are available</li>
<li>Spark jobs are always executed with the same parameters</li>
</ul>
<p><strong>Image processing</strong></p>
<ul>
<li>4 machines, 2 cores, 10GB RAM at least</li>
</ul>
<p><strong>Weather processing</strong> is negligible</p>
<p>Image processing</p>
<p>4 Executors (2 cores and 10GB RAM each)</p>
<dl>
<dt>Driver (2 cores and 20GB RAM)</dt>
<dd>
<p>15m/core (2h total)</p>
</dd>
</dl>
<p>Weather processing</p>
<p>2 Executors (1 core and 500MB RAM each)</p>
<dl>
<dt>Driver (1 core and 1GB RAM)</dt>
<dd>
<p>0.5 m/core (1m total)</p>
</dd>
</dl>
</section>

<section id="on-cloud-v2" class="title-slide slide level1 center">
<h1>On cloud v2</h1>
<table>
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">On-premises</th>
<th style="text-align: center;">On cloud</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Hardware</td>
<td style="text-align: center;">2356€/year</td>
<td style="text-align: center;">38000$/year</td>
</tr>
<tr class="even">
<td style="text-align: center;">Software</td>
<td style="text-align: center;">100000€/year</td>
<td style="text-align: center;">?</td>
</tr>
</tbody>
</table>
<p>Assuming 1 Executor = 1 Machine</p>
<ul>
<li>Compare 4 machines on-premises vs on cloud</li>
</ul>
<p>On-premises</p>
<ul>
<li>4 machines: 10602€/year / 18 machines x 4 machines = <em>2356€/year</em></li>
<li>Cloudera requires at least 10 nodes: <em>100000€/year</em></li>
</ul>
<p>AWS</p>
<ul>
<li>4 EC2 instances: 162000<span class="math inline">\(/year / 18 machines x 4 machines = *36000\)</span>/year*
<ul>
<li>Plus the resources for master services = <em>2000$/year</em></li>
</ul></li>
<li>Problems
<ul>
<li>Still no software stack</li>
<li>A lot of storage cost</li>
<li>Machines are up-and-running even when no computation is necessary (just to persist data)</li>
</ul></li>
</ul>
<p>AWS</p>
<ul>
<li>Still, we have no software stack configuration</li>
<li>Which is the major cost?</li>
</ul>
<p>AWS</p>
<ul>
<li>Still, we have no software stack configuration</li>
<li>Which is the major cost?</li>
</ul>
<p><img data-src="imgs/slides342.png"></p>
<p><img data-src="imgs/slides343.png"></p>
</section>

<section id="migration-4" class="title-slide slide level1 center">
<h1>Migration</h1>
<p>S3 standard</p>
<p>S3 Infrequent Access</p>
<p><img data-src="imgs/slides344.png"></p>
<p><img data-src="imgs/slides345.png"></p>
<p><em>AWS Storage</em></p>
<ul>
<li>HDFS on EC2</li>
<li>Heavy price</li>
<li>Machine must be always on to guarantee data persistency</li>
<li>Data locality</li>
</ul>
<p>S3</p>
<ul>
<li>Much cheaper</li>
<li>Does not require machines for data storage</li>
<li>Data locality is lost</li>
</ul>
<p><img data-src="imgs/slides346.png"></p>
<p><img data-src="imgs/slides347.png"></p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">On-premises</th>
<th style="text-align: center;">On cloud</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Hardware</td>
<td style="text-align: center;">2356€/year</td>
<td style="text-align: center;">?</td>
</tr>
<tr class="even">
<td style="text-align: center;">Software</td>
<td style="text-align: center;">100000€/year</td>
<td style="text-align: center;">?</td>
</tr>
</tbody>
</table>
<p>Migrating cluster to EMR: <em>?</em></p>
<ul>
<li>Given the software requirements, we need</li>
<li>1 x Master Node (to manage the cluster)1 x Core node (with HDFS/EBS)</li>
<li>4 x Task Nodes (to compute)</li>
</ul>
<p>Image processing</p>
<p>4 Executors (2 cores and 10GB RAM each)</p>
<dl>
<dt>Driver (2 cores and 20GB RAM)</dt>
<dd>
<p>15m/core (2h total)</p>
</dd>
</dl>
<p>Weather processing</p>
<dl>
<dt>2 Executors (1 core and 500MB RAM each)</dt>
<dd>
<p>0.5 m/core (1m total)</p>
</dd>
</dl>
<p>Driver (1 core and 1GB RAM)</p>
</section>

<section id="on-cloud-v3" class="title-slide slide level1 center">
<h1>On cloud v3</h1>
<table>
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">On-premises</th>
<th style="text-align: center;">On cloud</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Hardware</td>
<td style="text-align: center;">2356€/year</td>
<td style="text-align: center;">14710€/year</td>
</tr>
<tr class="even">
<td style="text-align: center;">Software</td>
<td style="text-align: center;">100000€/year</td>
<td style="text-align: center;">?</td>
</tr>
</tbody>
</table>
<p>Migrating cluster to EMR: <em>14710€/year</em></p>
<ul>
<li>S3 Infrequent Access storage (50 TB per month): 640€</li>
<li>1 x Master EMR nodes, EC2 (m4.xlarge), Utilization (75 h/month): 4.5€
<ul>
<li>75 h/month = 15min/task x 10task/day x 30day/month / 60min/hour</li>
</ul></li>
<li>1 x Core EMR nodes, EC2 (m4.xlarge), Utilization (75 h/month): 4.5€</li>
<li>4 x Task EMR nodes, EC2 (m4.4xlarge), Utilization (75 h/month): 72€</li>
<li>4 x EC2 <em>on demand (task node): 174.83€</em>
<ul>
<li>Storage amount (30 GB)</li>
<li>Workload (Daily, Duration of peak: 0 Hr 15 Min)</li>
<li>Instance type (m4.xlarge)</li>
</ul></li>
<li>2 x EC2 on demand (master and core nodes): 330€
<ul>
<li>Storage amount (30 GB)</li>
<li>Instance type (m4.xlarge)</li>
</ul></li>
</ul>
<table>
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">On-premises</th>
<th style="text-align: center;">On cloud</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Hardware</td>
<td style="text-align: center;">2356€/year</td>
<td style="text-align: center;">13445€/year</td>
</tr>
<tr class="even">
<td style="text-align: center;">Software</td>
<td style="text-align: center;">100000€/year</td>
<td style="text-align: center;">?</td>
</tr>
</tbody>
</table>
<p>Migrating cluster to EMR: <em>13445€/year</em></p>
<ul>
<li>S3 Infrequent Access storage (50 TB per month): 640€</li>
<li>1 x Master EMR nodes, EC2 (m4.xlarge), Utilization (75 h/month): 4.5€
<ul>
<li>75 h/month = 15min/task x 10task/day x 30day/month / 60min/hour</li>
</ul></li>
<li>1 x Core EMR nodes, EC2 (m4.xlarge), Utilization (75 h/month): 4.5€</li>
<li>4 x Task EMR nodes, EC2 (m4.4xlarge), Utilization (75 h/month): 72€</li>
<li>4 x EC2 <em>spot (task node): 69.55€</em>
<ul>
<li>Storage amount (30 GB)</li>
<li>Workload (Daily, Duration of peak: 0 Hr 15 Min)</li>
<li>Instance type (m4.xlarge)</li>
</ul></li>
<li>2 x EC2 on demand (master and core nodes): 330€
<ul>
<li>Storage amount (30 GB)</li>
<li>Instance type (m4.xlarge)</li>
</ul></li>
</ul>
<p><em><a href="https://calculator.aws/#/estimate?id=c3780b12bb43b593d05def5a1d5218d9764b8a65">https://calculator.aws/#/estimate?id=c3780b12bb43b593d05def5a1d5218d9764b8a65</a></em></p>
</section>

<section id="migration-5" class="title-slide slide level1 center">
<h1>Migration</h1>
<p>Summing up (cloud options)</p>
<table>
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Machine uptime</th>
<th style="text-align: center;">Storage</th>
<th style="text-align: center;">Software</th>
<th style="text-align: center;">Feasible?</th>
<th style="text-align: center;">Cost per year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Constant</td>
<td style="text-align: center;">EC2</td>
<td style="text-align: center;">Manual</td>
<td style="text-align: center;">YES: but high storage cost</td>
<td style="text-align: center;">~36K€</td>
</tr>
<tr class="even">
<td style="text-align: center;">Constant</td>
<td style="text-align: center;">EC2</td>
<td style="text-align: center;">EMR</td>
<td style="text-align: center;">YES: but high storage cost</td>
<td style="text-align: center;">~37K€</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Constant</td>
<td style="text-align: center;">S3</td>
<td style="text-align: center;">Manual</td>
<td style="text-align: center;">YES: but still manual provisioning</td>
<td style="text-align: center;">~17K€</td>
</tr>
<tr class="even">
<td style="text-align: center;">Constant</td>
<td style="text-align: center;">S3</td>
<td style="text-align: center;">EMR</td>
<td style="text-align: center;">YES</td>
<td style="text-align: center;">~18K€</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Pay-per-use</td>
<td style="text-align: center;">EC2</td>
<td style="text-align: center;">Manual</td>
<td style="text-align: center;">NO: pay-per-use + EC2 = Data unpersisted</td>
<td style="text-align: center;">-</td>
</tr>
<tr class="even">
<td style="text-align: center;">Pay-per-use</td>
<td style="text-align: center;">EC2</td>
<td style="text-align: center;">EMR</td>
<td style="text-align: center;">NO: pay-per-use + EC2 = Data unpersisted</td>
<td style="text-align: center;">-</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Pay-per-use</td>
<td style="text-align: center;">S3</td>
<td style="text-align: center;">Manual</td>
<td style="text-align: center;">ISH: repetitive manual provisioning</td>
<td style="text-align: center;">-</td>
</tr>
<tr class="even">
<td style="text-align: center;">Pay-per-use</td>
<td style="text-align: center;">S3</td>
<td style="text-align: center;">EMR</td>
<td style="text-align: center;">YES</td>
<td style="text-align: center;">~14K€</td>
</tr>
</tbody>
</table>
<p>Summing up</p>
<ul>
<li>We estimated the cluster costs
<ul>
<li>On-premises solution with 18 machines: no go</li>
<li>Cloud solution with 18 EC2 instances: no go</li>
</ul></li>
<li>We reduced the solution based on software requirements
<ul>
<li>On-premises solution with 4 machines: no go</li>
<li>Cloud solution with 4 EC2 instances: no go, we miss the software configuration</li>
</ul></li>
<li>We moved the cluster to AWS EMR + spot instances + S3 storage</li>
</ul>
<p>Can we do better?</p>
<ul>
<li>Pick ad-hoc cloud services (AWS Lambda e AWS Batch)</li>
<li>… to re-think the applications (food for thoughts)</li>
</ul>
</section>

<section id="case-study-1" class="title-slide slide level1 center">
<h1>Case study</h1>
<p>WeLASER</p>
</section>

<section id="the-welaser-project" class="title-slide slide level1 center">
<h1>The WeLASER project</h1>
<p><strong>Project description</strong></p>
<ul>
<li><em>The increased use of pesticides and </em> <em>fertilisers</em> * damages the environment, destroys non-target plants and beneficial insects for the soil and harms human and animal health. Most seeds develop herbicide-resistant properties, rendering pesticides ineffective. Mechanical automatic systems that are studied as alternatives to pesticides deteriorate soil features, damage beneficial soil organisms and offer limited results for in-row weeding. The EU-funded WeLASER project will develop a non-chemical solution for weed management based on pioneering technology consisting of the application of lethal doses of energy on the weed meristems through a high-power laser source. An AI-vision system separates crops from weeds, identifying the weed meristems and pointing the laser at them. A smart controller based on IoT and cloud computing techniques coordinates the system, which is * <em>transfered</em> * all over the field by an autonomous vehicle.*</li>
</ul>
<p><img data-src="imgs/slides348.png"></p>
<p><a href="https://cordis.europa.eu/project/id/101000256">https://cordis.europa.eu/project/id/101000256</a> (accessed 2020-08-01)</p>
<p>Which requirements do you foresee?</p>
<ul>
<li>Can we define a tentative (service) architecture for the WeLASER project?</li>
</ul>
<p>Assumptions</p>
<ul>
<li>Do not consider the collection of weed/crop images &amp; training/deploying of the CV algorithm</li>
</ul>
<p><img data-src="imgs/slides349.png"></p>
<p><a href="https://cordis.europa.eu/project/id/101000256">https://cordis.europa.eu/project/id/101000256</a> (accessed 2020-08-01)</p>
</section>

<section id="data-sources" class="title-slide slide level1 center">
<h1>Data sources</h1>
<p><a href="https://docs.google.com/spreadsheets/d/17zEr62CzyqeIy0vU-DcjEUoxf6bMd3ziLSSeIXvk4Lg/edit?usp=sharing">https://docs.google.com/spreadsheets/d/17zEr62CzyqeIy0vU-DcjEUoxf6bMd3ziLSSeIXvk4Lg/edit?usp=sharing</a></p>
</section>

<section id="workload" class="title-slide slide level1 center">
<h1>Workload</h1>
<p>Nothing special</p>
<ul>
<li>Every night compute aggregated indexes on the collected data (2h/day)</li>
</ul>
<p>On-premises (HDFS cluster)</p>
<ul>
<li>How many machines do we need?</li>
<li>With which resources?</li>
</ul>
</section>

<section id="on-premises-1" class="title-slide slide level1 center">
<h1>On-premises</h1>
<table>
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">On-premises</th>
<th style="text-align: center;">On cloud</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Hardware</td>
<td style="text-align: center;">2900€/year</td>
<td style="text-align: center;">?</td>
</tr>
<tr class="even">
<td style="text-align: center;">Software</td>
<td style="text-align: center;">40000€/year</td>
<td style="text-align: center;">?</td>
</tr>
</tbody>
</table>
<p>On-premises</p>
<ul>
<li>How many machines do we need?
<ul>
<li><em>4</em>: <em>1 master node</em> + <em>3 HDFS data nodes</em></li>
</ul></li>
<li>With which resources?
<ul>
<li>Assuming a HDFS replication factor of 3, we need at least 1TB of disk overall (not that much)</li>
<li>Think bigger: at least 8 cores, 64GB RAM, 500GB SSD + 4TB HDD, no GPU</li>
</ul></li>
<li>8700€ / 3 years = 2900€</li>
</ul>
<p><img data-src="imgs/slides350.png"></p>
<p><img data-src="imgs/slides351.png"></p>
<p><a href="https://www.rect.coreto-europe.com/en">https://www.rect.coreto-europe.com/en</a> (accessed 2022-09-01)<a href="https://www.cloudera.com/products/pricing.html">https://www.cloudera.com/products/pricing.html</a> (accessed 2022-09-01)</p>
</section>

<section id="on-cloud-v1-1" class="title-slide slide level1 center">
<h1>On cloud v1</h1>
<table>
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">On-premises</th>
<th style="text-align: center;">On cloud</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Hardware</td>
<td style="text-align: center;">2900€/year</td>
<td style="text-align: center;">~40000$/year</td>
</tr>
<tr class="even">
<td style="text-align: center;">Software</td>
<td style="text-align: center;">40000€/year</td>
<td style="text-align: center;">?</td>
</tr>
</tbody>
</table>
<p>Moving the Hadoop cluster as IAAS</p>
<ul>
<li>EC2</li>
<li>Quantity (4), Pricing strategy (EC2 Instance Savings Plans 3 Year No Upfront), <em>Storage amount (4 TB), </em> Instance type (r6g.2xlarge)</li>
</ul>
<p>EMR</p>
<ul>
<li>Number of master EMR nodes (1), EC2 instance (r5.2xlarge), Utilization (100 %Utilized/Month) Number of core EMR nodes (3), EC2 instance (r5d.2xlarge), <em>Utilization (100 %Utilized/Month)</em></li>
</ul>
<p><em>MKS (KAFKA)</em></p>
<ul>
<li>Storage per Broker (10 GB), Number of Kafka broker nodes (3), Compute Family (m5.2xlarge)</li>
</ul>

<img data-src="imgs/slides352.png" class="r-stretch"><p><a href="https://calculator.aws/#/estimate?id=05965ca7de23fd9e7d2ab2cd0175fe8c01822c9c">https://calculator.aws/#/estimate?id=05965ca7de23fd9e7d2ab2cd0175fe8c01822c9c</a> (accessed 2022-09-01)</p>
</section>

<section id="on-cloud-v2-1" class="title-slide slide level1 center">
<h1>On cloud v2</h1>
<table>
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">On-premises</th>
<th style="text-align: center;">On cloud</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Hardware</td>
<td style="text-align: center;">2900€/year</td>
<td style="text-align: center;">~4000$/year</td>
</tr>
<tr class="even">
<td style="text-align: center;">Software</td>
<td style="text-align: center;">40000€/year</td>
<td style="text-align: center;">?</td>
</tr>
</tbody>
</table>
<p>Moving the Hadoop cluster as PAAS</p>
<ul>
<li>EC2</li>
<li>Quantity (4), Pricing strategy (<em>On-Demand Instances</em>), Storage amount (30 GB), Instance type (r6g.2xlarge)</li>
</ul>
<p>EMR</p>
<ul>
<li>Number of master EMR nodes (1), EC2 instance (r5.2xlarge), Utilization (2 Hours/Day) Number of core EMR nodes (3), EC2 instance (r5d.2xlarge), <em>Utilization (2 Hours/Day)</em></li>
</ul>
<p><em>S3</em></p>
<ul>
<li>Standard storage (60 GB per month)</li>
</ul>
<p><em>Kinesis</em></p>
<ul>
<li>Days for data retention (1 days), Records (100 per second), Consumer Applications (3)</li>
</ul>

<img data-src="imgs/slides353.png" class="r-stretch"><p><a href="https://calculator.aws/#/estimate?id=53f60ff0412a18877dc8e1274f7d9875aa3bf665">https://calculator.aws/#/estimate?id=53f60ff0412a18877dc8e1274f7d9875aa3bf665</a> (accessed 2022-09-01)</p>
</section>

<section id="cost-vs-price" class="title-slide slide level1 center">
<h1>Cost vs price</h1>
<p>How would you evaluate the cost and the price?</p>
<p><em>Price</em> is the amount a customer is willing to pay&nbsp;for a&nbsp;product or service</p>
<ul>
<li><em>Cost</em> is the expense incurred for&nbsp;creating a product or service</li>
<li>Hardware</li>
<li>Development</li>
<li>Maintenance</li>
</ul>
<p><em>Profit</em> is the difference between price&nbsp;paid and costs&nbsp;incurred is profit</p>
<ul>
<li>If a customer pays&nbsp;$10 for a product that costs&nbsp;$6&nbsp;to make and sell, the company earns&nbsp;$4</li>
</ul>
</section>

<section id="newsection-1" class="title-slide slide level1 center">
<h1>– newsection –</h1>

</section>

<section id="data-pipelines-on-cloud-streaming" class="title-slide slide level1 center">
<h1>Data pipelines on cloud (Streaming)</h1>

</section>

<section id="section-2" class="title-slide slide level1 center">
<h1></h1>
<p>Supporting services</p>
<p>Serve (deciding)</p>
<p>BI tools (e.g., Tableau)</p>
<p>Analytics (analyzing)</p>
<p>Networking, etc.</p>
<p>Machine learning</p>
<p>Ingestion (acquiring)</p>
</section>

<section id="reference-scenario-batch-vs-stream" class="title-slide slide level1 center">
<h1>Reference scenario: batch vs stream</h1>

</section>

<section id="batch-vs.-streaming-systems" class="title-slide slide level1 center">
<h1>Batch vs.&nbsp;Streaming systems</h1>
<p>What is a bulk processing system?</p>
<ul>
<li>High latency</li>
<li>Exact results</li>
<li>Process massive data at once
<ul>
<li>… is this true?</li>
</ul></li>
</ul>
<p>What is a streaming system?</p>
<ul>
<li>Low latency</li>
<li>Approximate result
<ul>
<li>… is this true?</li>
</ul></li>
<li>Process data item by data item
<ul>
<li>… is this true?</li>
</ul></li>
</ul>
<p>What is a bulk processing system?</p>
<ul>
<li>An engine capable to handle processing on <strong>bounded</strong> datasets</li>
</ul>
<p>What is a streaming system?</p>
<ul>
<li>An engine capable to handle processing on <strong>unbounded</strong> datasets</li>
<li>Streaming is a superset of batch processing</li>
</ul>
<p>Akidau, Tyler, Slava Chernyak, and Reuven Lax. <em>Streaming systems: the what, where, when, and how of large-scale data processing</em> . ” O’Reilly Media, Inc.”, 2018.</p>
</section>

<section id="reference-scenario-batch-vs-stream-1" class="title-slide slide level1 center">
<h1>Reference scenario: batch vs stream</h1>
<table>
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">Batch data processing</th>
<th style="text-align: center;">Stream data processing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Data scope</td>
<td style="text-align: center;">Queries or processing over all or most of the data in the dataset</td>
<td style="text-align: center;">Queries or processing over data within a rolling time window, or on just the most recent data record</td>
</tr>
<tr class="even">
<td style="text-align: center;">Data size</td>
<td style="text-align: center;">Large batches of data</td>
<td style="text-align: center;">Individual records or micro batches consisting of a few records</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Latency</td>
<td style="text-align: center;">Minutes to hours</td>
<td style="text-align: center;">Seconds or milliseconds</td>
</tr>
<tr class="even">
<td style="text-align: center;">Analysis</td>
<td style="text-align: center;">Complex analytics</td>
<td style="text-align: center;">Simple response functions, aggregates, and rolling metrics</td>
</tr>
</tbody>
</table>
</section>

<section id="ingestion-batch" class="title-slide slide level1 center">
<h1>Ingestion: batch</h1>
<p><strong>Goal</strong>: moving data to the cloud</p>
<ul>
<li>Moving data to the cloud</li>
<li><em>80TB</em> of data to move,</li>
<li><em>1Gbps</em> connection to the internet</li>
</ul>
<p>How many <em>days</em>?</p>
<ul>
<li><em>80000GB</em> / (<em>1Gbps / 8</em>) / <em>60 / 60 / 24 </em> ~= a week without internet</li>
</ul>
<p>Batch/Bulk: move data from on-premises storage</p>
<ul>
<li>Workflow</li>
<li>Receive shipment</li>
<li>Set up</li>
<li>Transfer data</li>
<li>Ship back (shipping carrier)</li>
</ul>
</section>

<section id="ingestion-batch-aws" class="title-slide slide level1 center">
<h1>Ingestion: batch (AWS)</h1>
<p>AWS Snowball</p>
<ul>
<li>50TB (North America only) and 80TB versions</li>
<li>Not rack-mountable</li>
</ul>
<p>Throughput</p>
<ul>
<li>1 Gbps or 10 Gbps using an RJ-45 connection</li>
<li>10 Gbps using a fiber optic connection</li>
</ul>
<p><img data-src="imgs/slides354.png"></p>
<p><a href="https://aws.amazon.com/snowball/">https://aws.amazon.com/snowball/</a></p>
<p><img data-src="imgs/slides355.png"></p>
</section>

<section id="aws-snowmobile" class="title-slide slide level1 center">
<h1>AWS Snowmobile</h1>
<p>What if we have exabyte of data?</p>
<p>Value Metric</p>
<p>103 KB (kilobyte)</p>
<p>106 MB (megabyte)</p>
<p>109 GB (gigabyte)</p>
<p>1012 TB (terabyte)</p>
<p>1015 PB (petabyte)</p>
<p>1018 EB (exabyte)</p>
<p>1021 ZB (zettabyte)</p>
<p>1024 YB (yottabyte)</p>
<p><a href="https://youtu.be/8vQmTZTq7nw?t=45">https://youtu.be/8vQmTZTq7nw?t=45</a> (2022-11-14)</p>
</section>

<section id="ingestion-stream" class="title-slide slide level1 center">
<h1>Ingestion: stream</h1>
<ul>
<li>Data (often) flows in both directions, storage systems are both sources and destinations for data transformations</li>
<li>Two pipelines per application (data in/out)
<ul>
<li>Worst case (full connectivity): O(N2)</li>
</ul></li>
</ul>
<p><img data-src="imgs/slides356.png"></p>
<p>Kreps, Jay. <em>I heart logs: Event data, stream processing, and data integration</em> . ” O’Reilly Media, Inc.”, 2014.</p>
<p><strong>Stream</strong>: real-time streaming data</p>
<ul>
<li><strong>Event</strong>: anything that we can observe occurring at a particular point in time</li>
</ul>
<p><strong>Continuous streaming</strong></p>
<ul>
<li>Illimited succession of individual events</li>
<li>Ordered by the point in time at which each event occurred</li>
</ul>
<p><strong>Publish/subscribe (pub/sub)</strong>: a way of communicating messages</p>
<ul>
<li><em>Senders</em> publish messages associated with one or more <strong>topics</strong></li>
<li><em>Receivers</em> subscribe to specific topics, receive all messages with that topic</li>
<li><em>Messages</em> are events</li>
</ul>
<p><img data-src="imgs/slides357.jpg"></p>
<p><a href="https://www.manning.com/books/event-streams-in-action">https://www.manning.com/books/event-streams-in-action</a></p>
<p>Log</p>
<ul>
<li>Append-only data structure</li>
<li>Each application only knows about the log, it ignores the details of the source
<ul>
<li>E.g., a data consumer is not concerned about whether the data came from a relational database or some application</li>
</ul></li>
</ul>
<p>The log acts as a messaging system with durability guarantees and ordering semantics</p>
<p><img data-src="imgs/slides358.png"></p>
<p>Kreps, Jay. <em>I heart logs: Event data, stream processing, and data integration</em> . ” O’Reilly Media, Inc.”, 2014.</p>
<p>General idea:</p>
<ul>
<li>Collect events from many source systems</li>
<li>Store them in a unified log</li>
<li>Enable applications to operate on these event streams</li>
</ul>
<p><strong>Unified log</strong></p>
<ul>
<li><em>Unified</em>, <em>append-only</em>, <em>ordered</em>, <em>distributed</em> log that allows the centralization of event streams</li>
</ul>
<p><img data-src="imgs/slides359.jpg"></p>
<p><strong>Unified</strong>: a single log in a company with applications sending/reading events</p>
<ul>
<li>Log serves as central data backbone
<ul>
<li>It can contain many distinct continuous streams of events</li>
<li>Not all events are sent to the same event stream</li>
</ul></li>
</ul>
<p><strong>Append-only</strong>: new events are appended to the unified log</p>
<ul>
<li>Existing events are never updated in place
<ul>
<li>If read the event #10, never look at events 1 through 10 again</li>
</ul></li>
<li>Events are automatically deleted from the unified log when they age
<ul>
<li>E.g., automatically remove events after 7 days</li>
</ul></li>
</ul>
<p><strong>Distributed</strong>: the unified log lives across a cluster of machines</p>
<ul>
<li>Optionally divide events into shards (i.e., partitions)Still, the log is unified since we have a single (conceptual) log</li>
</ul>
<p>Distribution ensures</p>
<ul>
<li>Scalability: work with streams larger than the capacity of single machines</li>
<li>Durability: replicate all events within the cluster to overcome data loss</li>
<li>Using a log as a universal integration mechanism is never going to be more than an elegant fantasy if we can’t build a log that is fast, cheap, and scalable</li>
</ul>
<p><img data-src="imgs/slides360.jpg"></p>
<p><strong>Ordered</strong>: events in a shard have a sequential IDs (unique in a shard)</p>
<ul>
<li>Local ordering keeps things much simpler than global ordering</li>
<li>Applications maintain their own cursor for each shard</li>
</ul>
<p><img data-src="imgs/slides361.jpg"></p>
<p>Lamport, Leslie. “Time, clocks, and the ordering of events in a distributed system.” <em>Concurrency: the Works of Leslie </em> <em>Lamport</em> . 2019. 179-196.</p>
<p>Two types of processing</p>
<ul>
<li><strong>Single-event:</strong> a single event produces zero or more events
<ul>
<li>Validating “Does this event contain all the required fields?”</li>
<li>Enriching “Where is this IP address located?”</li>
<li>Filtering “Is this error critical?”</li>
</ul></li>
<li><strong>Multiple-event:</strong> multiple events collectively produce zero or more events
<ul>
<li>Aggregating, functions such as minimum, maximum, sum</li>
<li>Pattern matching, looking for patterns or co-occurrence</li>
<li>Reordering events based on a sort key</li>
</ul></li>
</ul>
<p><img data-src="imgs/slides362.png"></p>
<p>Why not communicating directly using messaging protocols?</p>
<ul>
<li>A log enables</li>
<li>Multi-subscriber: each data item is available to any processor that wants it</li>
<li>Order: maintained in the processing done by each consumer of data</li>
<li>Buffering and isolation to the individual processes
<ul>
<li>E.g., a that processor produces faster than its downstream consumer can keep up</li>
</ul></li>
<li>Reprocessing, maintaining state, etc.</li>
</ul>
<p>Indeed, logs are common:</p>
<ul>
<li>MapReduce workflows use files to checkpoint and share their intermediate results</li>
<li>SQL processing pipelines create intermediate or temporary tables</li>
</ul>
</section>

<section id="ingestion-stream-aws" class="title-slide slide level1 center">
<h1>Ingestion: stream (AWS)</h1>
<p>Amazon Kinesis Data Streams</p>
<ul>
<li>Created and provisioned by shard
<ul>
<li>Each shard provides 1 MBps and 1000 data puts per second</li>
</ul></li>
<li>A data record consists of
<ul>
<li>User-supplied partition key to balance records across shards</li>
<li>Incremental sequence number added by the shard</li>
<li>A data blob</li>
</ul></li>
<li>Consumers get records by shard
<ul>
<li>Records are sorted by partition key and sequence number</li>
<li>Ordering is not guaranteed across shards</li>
</ul></li>
<li>Records are retained for 7 days at maximum</li>
</ul>

<img data-src="imgs/slides363.png" class="r-stretch"><p><a href="https://docs.aws.amazon.com/streams/latest/dev/key-concepts.html">https://docs.aws.amazon.com/streams/latest/dev/key-concepts.html</a></p>
<p>Re-sharding (i.e., scaling)</p>
<ul>
<li>Split a shard into two, or merge two shards</li>
<li>Users must scale shards up and down manually
<ul>
<li>Monitor usage with Amazon CloudWatch and modify scale as needed</li>
</ul></li>
<li>Avoid shard management by using Kinesis Data Firehose</li>
</ul>
<p>Kinesis is a regional service, with streams scoped to specific regions</p>
<ul>
<li>All ingested data must travel to the region in which the stream is defined</li>
</ul>
<p>Costs</p>
<ul>
<li>Priced by shard hour, data volume, and data retention period</li>
<li>Pay for resources you provision (even if not used)</li>
</ul>
<p><a href="https://aws.amazon.com/cloudwatch/">https://aws.amazon.com/cloudwatch/</a><a href="https://aws.amazon.com/kinesis/data-firehose">https://aws.amazon.com/kinesis/data-firehose</a></p>
</section>

<section id="ingestion-stream-1" class="title-slide slide level1 center">
<h1>Ingestion: stream</h1>
<table>
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Feature</th>
<th style="text-align: center;">AWS Kinesis</th>
<th style="text-align: center;">Google Pub/Sub</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Unit of deployment</td>
<td style="text-align: center;">Stream</td>
<td style="text-align: center;">Topic</td>
</tr>
<tr class="even">
<td style="text-align: center;">Unit of provisioning</td>
<td style="text-align: center;">Shard</td>
<td style="text-align: center;">N/A (fully managed)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Data unit</td>
<td style="text-align: center;">Record</td>
<td style="text-align: center;">Message</td>
</tr>
<tr class="even">
<td style="text-align: center;">Data producer/destination</td>
<td style="text-align: center;">Producer/Consumer</td>
<td style="text-align: center;">Publisher/Subscriber</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Data partitioning</td>
<td style="text-align: center;">User-supplied partition key</td>
<td style="text-align: center;">N/A (fully managed)</td>
</tr>
<tr class="even">
<td style="text-align: center;">Retention period</td>
<td style="text-align: center;">Up to 7 days</td>
<td style="text-align: center;">Up to 7 days</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Pricing</td>
<td style="text-align: center;">Per shard-hour, PUT payload units,<br>and optional data retention</td>
<td style="text-align: center;">Message ingestion and delivery,<br>and optional message retention</td>
</tr>
</tbody>
</table>
</section>

<section id="section-3" class="title-slide slide level1 center">
<h1></h1>
<p>Supporting services</p>
<p>Serve (deciding)</p>
<p>BI tools (e.g., Tableau)</p>
<p>Analytics (analyzing)</p>
<p>Networking, etc.</p>
<p>Machine learning</p>
<p>Ingestion (acquiring)</p>
</section>

<section id="serverless-computingprocessing" class="title-slide slide level1 center">
<h1>Serverless computing/processing</h1>
<p>AWS Lambda: compose code functions in a loose orchestration</p>
<ul>
<li>Build modular back-end systems</li>
<li>Event-driven and push-based pipelines</li>
</ul>
<p>With Lambda, you are responsible only for your code (Lambda function)</p>
<ul>
<li>Lambda manages the compute fleet that offers a balance of memory and CPU</li>
<li>Lambda performs operational and administrative activities on your behalf
<ul>
<li>Provisioning capacity, monitoring fleet health, applying security patches, etc.</li>
</ul></li>
</ul>

<img data-src="imgs/slides364.png" class="r-stretch"></section>

<section id="serverless-computing-aws-lambda" class="title-slide slide level1 center">
<h1>Serverless computing (AWS Lambda)</h1>
<p>AWS Lambda</p>
<ul>
<li>A Lambda function is a granular service</li>
<li>The Lambda runtime invokes a lambda function multiple times in parallel</li>
<li>Compute service that executes code written in JavaScript/Python/C#/Java
<ul>
<li>Elastic Compute Cloud (EC2) servers run the code (e.g., a Linux server)</li>
</ul></li>
<li>A function is <code>code + configuration + dependencies</code>
<ul>
<li>Source code (JARs or DLLs) is zipped up and deployed to a container</li>
</ul></li>
<li>Invocation supports push/pull events</li>
</ul>

<img data-src="imgs/slides365.png" class="r-stretch"></section>

<section id="serverless-computing-faas" class="title-slide slide level1 center">
<h1>Serverless computing (FaaS)</h1>
<p>FaaS: write single-purpose stateless functions</p>
<ul>
<li>Keep the single responsibility principle in mind</li>
<li>A function that does just one thing is more testable and robust</li>
<li>A function with a well-defined interface is also more likely to be reused</li>
<li>Code should be created in a stateless style
<ul>
<li>Statelessness allows scalability</li>
<li>Local resources or processes will not survive along sessions</li>
</ul></li>
<li>Functions that terminate sooner are cheaper
<ul>
<li>E.g., pricing is based on #requests, execution time, and allocated memory</li>
</ul></li>
</ul>
</section>

<section id="patterns-for-data-pipelines" class="title-slide slide level1 center">
<h1>Patterns for data pipelines</h1>
<p>Patterns are architectural solutions to problems in software design</p>
<ul>
<li>A (design) pattern is a general, best-practice reusable solution to a commonly occurring problem within a given context in software design</li>
<li>It is a template for how to solve a problem in many different situations</li>
</ul>
<p>Patterns for serverless data pipelines</p>
<ul>
<li>Command pattern</li>
<li>Messaging pattern</li>
<li>Priority queue pattern</li>
<li>Pipes and filters pattern</li>
</ul>

<img data-src="imgs/slides366.jpg" class="r-stretch"><p><a href="https://www.manning.com/books/aws-lambda-in-action">https://www.manning.com/books/aws-lambda-in-action</a></p>
</section>

<section id="command-pattern" class="title-slide slide level1 center">
<h1>Command pattern</h1>
<p>Command pattern</p>
<ul>
<li>A behavioral design pattern in which an object is used to encapsulate the information needed to perform an action or trigger an event</li>
</ul>
<p>Encapsulate a request as an object</p>
<ul>
<li>Issue requests to objects without knowing anything about the operation being requested or the receiver</li>
</ul>

<img data-src="imgs/slides367.png" class="r-stretch"><p><a href="https://aws.amazon.com/api-gateway">https://aws.amazon.com/api-gateway</a></p>
</section>

<section id="pipes-and-filters-pattern" class="title-slide slide level1 center">
<h1>Pipes and filters pattern</h1>
<p>Decompose a complex processing task into a sequence of manageable services</p>
<ul>
<li>Components designed to transform data are referred to as filters</li>
<li>Connectors that pass data between components are referred to as pipes</li>
</ul>

<img data-src="imgs/slides368.png" class="r-stretch"></section>

<section id="messaging-pattern" class="title-slide slide level1 center">
<h1>Messaging pattern</h1>
<p>Messaging pattern</p>
<ul>
<li>Describes how two different parts of a message passing system connect and communicate with each other</li>
</ul>
<p>Decouple services from direct dependence and allow storage of events in a queue</p>
<ul>
<li>Reliability: if the consuming service goes offline, messages are retained in the queue and can still be processed</li>
<li>A message queue can have a single sender/receiver or multiple senders/receivers</li>
</ul>

<img data-src="imgs/slides369.png" class="r-stretch"></section>

<section id="priority-queue-pattern" class="title-slide slide level1 center">
<h1>Priority queue pattern</h1>
<p>Decouple and prioritize requests sent to services</p>
<ul>
<li>Requests with a higher priority are received and processed more quickly than those with a lower priority</li>
<li>Useful in applications that offer different service level guarantees</li>
</ul>
<p>Control how and when messages are dealt with</p>
<ul>
<li>Different queues, topics, or streams to feed messages to your functions</li>
<li>High-priority messages go through expensive services with more capacity</li>
</ul>

<img data-src="imgs/slides370.png" class="r-stretch"></section>

<section id="thats-all-folks" class="title-slide slide level1 center">
<h1>That’s all, folks!</h1>

</section>

<section id="feedbacks" class="title-slide slide level1 center">
<h1>Feedbacks?</h1>

</section>

<section id="exams" class="title-slide slide level1 center">
<h1>Exams</h1>

</section>

<section id="newsection-2" class="title-slide slide level1 center">
<h1>– newsection –</h1>

</section>

<section id="hands-on-aws" class="title-slide slide level1 center">
<h1>Hands on AWS</h1>

</section>

<section id="a-tentative-organization" class="title-slide slide level1 center">
<h1>A tentative organization</h1>
<p>Supporting services</p>
<p>Serve (deciding)</p>
<p>BI tools (e.g., Tableau)</p>
<p>Analytics (analyzing)</p>
<p>Networking, etc.</p>
<p>Machine learning</p>
<p>Ingestion (acquiring)</p>
</section>

<section id="identity-and-access-management" class="title-slide slide level1 center">
<h1>Identity and Access Management</h1>
<p>Identity and Access Management (IAM)</p>
<ul>
<li>Web service that controls fine-grained access to AWS resources</li>
<li>IAM controls who is authenticated and authorized to use resources</li>
</ul>
<p>IAM user</p>
<ul>
<li>Unique identity recognized by AWS services and applications</li>
<li>Similar to user in an operating system like Windows or UNIX</li>
</ul>
<p>IAM role</p>
<ul>
<li>Set of policies for making AWS service requests</li>
<li>Trusted entities (e.g., such as IAM users) assume roles
<ul>
<li>Delegate access with defined permissions to trusted entities</li>
<li>There is no limit to the number of IAM roles a user can assume</li>
</ul></li>
</ul>
<p>User vs role</p>
<ul>
<li>User has permanent long-term credentials and is used to directly interact with AWS services</li>
<li>Role does not have credentials and cannot make direct requests to AWS services</li>
<li>Roles are assumed by authorized entities, such as IAM users</li>
</ul>
<p>Alice (i.e., an IAM user) is a firewoman</p>
<ul>
<li>She is the same person with or without her turnout gear</li>
<li>As a firewoman (i.e., a role)
<ul>
<li>If she speeds to a house fire and passes a police officer, he isn’t going to give her a ticket</li>
<li>In her role as a <em>firewoman</em>, she is allowed to speed to the house fire</li>
</ul></li>
<li>As a private citizen (i.e., another role)
<ul>
<li>When she is off duty, if she speeds past that same police officer, he’s going to give her a ticket</li>
<li>In her role as a <em>private citizen</em>, she is not allowed to speed</li>
</ul></li>
</ul>
</section>

<section id="aws" class="title-slide slide level1 center">
<h1>AWS</h1>
<p>Amazon Web Services (AWS) is a public-cloud platform</p>
<ul>
<li>Services can be accessed in multiple ways</li>
<li>Web GUI: intuitive point and click access without any programming
<ul>
<li>Intuitive interfaces is part of the attraction of cloud services</li>
<li>Tedious if the same actions must be performed repeatedly</li>
</ul></li>
<li>(REST) Application programming interface (API)
<ul>
<li>Permits requests to be transmitted via Hypertext Transfer Protocol (HTTPS)</li>
</ul></li>
<li>Software development kits (SDKs) that you install on your computer
<ul>
<li>Access from programming languages such as Python, Java, etc.</li>
</ul></li>
</ul>
</section>

<section id="aws-web-console" class="title-slide slide level1 center">
<h1>AWS Web console</h1>
<p>We use the AWS Educate program</p>
<ul>
<li>Login with the provided account</li>
<li>You got 150$ to work on AWS services</li>
<li>Provisioned services charge even if not used</li>
</ul>
<p><img data-src="imgs/slides371.png"></p>
<p><a href="https://www.awseducate.com/signin/SiteLogin">https://www.awseducate.com/signin/SiteLogin</a></p>
<p><img data-src="imgs/slides372.png"></p>
</section>

<section>
<section id="aws-cli" class="title-slide slide level1 center">
<h1>AWS CLI</h1>
<p>CLI interface</p>
<ul>
<li>Necessary to install the CLI (version 2)</li>
<li>See <a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html">https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html</a></li>
</ul>
<p>Synopsis</p>
</section>
<section class="slide level2">

<p>aws [options] &lt;command&gt; &lt;subcommand&gt; [parameters]</p>
<p>Description</p>
</section>
<section class="slide level2">

<p>A unified tool to manage your AWS services.</p>
<p><a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-linux.html">https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-linux.html</a></p>
<p><img data-src="imgs/slides373.png"></p>
<p>CLI needs credentials to work</p>
<ul>
<li>Go back to AWS Educate</li>
<li>Click on “Account Details”</li>
<li>Copy the content into the file ~/.aws/credentials</li>
<li>Henceforth, we assume that you have set up the credentials file</li>
<li>Credentials expire after some time; you need a manually refresh</li>
</ul>
<p><img data-src="imgs/slides374.png"></p>
<p>Run <code>aws configure</code></p>
<ul>
<li>Confirm AWS Access Key ID (press enter)</li>
<li>Confirm AWS Secret Access Key (press enter)</li>
<li>Set Default region name to <code>us-east-1</code></li>
<li>Set Default output format to <code>json</code></li>
</ul>
<p>It is also possible to configure an AWS profile</p>
<ul>
<li>A (named) profile is a collection of settings and credentials</li>
<li>If profile is specified, its settings and credentials are used to run a command</li>
<li>When no profile is explicitly referenced, use <code>default</code>
<ul>
<li>We stick to <code>default</code></li>
</ul></li>
</ul>
</section></section>
<section id="object-storage-s3" class="title-slide slide level1 center">
<h1>Object storage: S3</h1>
<p>Create S3 bucket, the following rules apply for naming buckets</p>
<ul>
<li>Must be between 3 and 63 characters long</li>
<li>Can consist only of lowercase letters, numbers, dots (.), and hyphens (-)</li>
<li>Must be unique within a partition (i.e., a group of regions)</li>
</ul>
<p>$ git clone <a href="https://github.com/w4bo/bigdata-aws/">https://github.com/w4bo/bigdata-aws/</a></p>
<p>$ cd bigdata-aws/lab01-lambda</p>
<p>$ aws s3api create-bucket –bucket aws-bucket-bigdata2021</p>
<p>$ aws s3 cp datasets/inferno.txt s3://aws-bucket-bigdata2021/inferno.txt</p>
<p>$ aws s3api list-objects –bucket aws-bucket-bigdata2021</p>
<p><a href="https://s3.console.aws.amazon.com/s3/home?region=us-east-1">https://s3.console.aws.amazon.com/s3/home?region=us-east-1#</a></p>
</section>

<section id="newsection-3" class="title-slide slide level1 center">
<h1>– newsection –</h1>

</section>

<section id="data-pipelines-on-aws-lambda" class="title-slide slide level1 center">
<h1>Data pipelines on AWS Lambda</h1>

</section>

<section id="requirements" class="title-slide slide level1 center">
<h1>Requirements</h1>
<p>To start this lecture, you need to</p>
<ul>
<li>Activate your AWS Educate account</li>
<li>Either
<ul>
<li>Install the necessary software
<ul>
<li>git</li>
<li>IntelliJ IDEA (with AWS Toolkit and Scala plugins)</li>
<li>python</li>
<li>java 1.8</li>
<li>Docker</li>
<li>AWS CLI, AWS SAM CLI</li>
</ul></li>
<li>Be able to download and run the VM</li>
</ul></li>
</ul>
</section>

<section id="aws-sam-cli" class="title-slide slide level1 center">
<h1>AWS SAM CLI</h1>
<p>Serverless Application Model is a framework to build serverless applications</p>
<ul>
<li>A serverless application is a combination of Lambda functions, event sources, etc.</li>
<li>Install AWS SAM CLI (on Linux)</li>
</ul>
<p>sudo group add docker</p>
<p>sudo usermod –aG docker $USER</p>
<p>newgrp docker</p>
<p>sudo chmod 666 /var/run/docker.sock</p>
<p>wget <a href="https://github.com/aws/aws-sam-cli/releases/latest/download/aws-sam-cli-linux-x86*64.zip">https://github.com/aws/aws-sam-cli/releases/latest/download/aws-sam-cli-linux-x86*64.zip</a></p>
<p>unzip aws-sam-cli-linux-x86*64.zip -d sam-installation</p>
<p>sudo ./sam-installation/install</p>
<p>sam –version</p>
<p><a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html">https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html</a></p>
</section>

<section id="aws-services" class="title-slide slide level1 center">
<h1>AWS services</h1>
<p>AWS Educate (and AWS console)</p>
<ul>
<li><a href="https://aws.amazon.com/it/education/awseducate/">https://aws.amazon.com/it/education/awseducate/</a></li>
<li><a href="https://console.aws.amazon.com/console/home?region=us-east-1">https://console.aws.amazon.com/console/home?region=us-east-1</a></li>
</ul>
<p>IAM (authentication)</p>
<ul>
<li><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/iam-ug.pdf">https://docs.aws.amazon.com/IAM/latest/UserGuide/iam-ug.pdf</a></li>
</ul>
<p>SDK (software API)</p>
<ul>
<li><a href="https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/home.html">https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/home.html</a></li>
</ul>
<p>Lambda (serverless computing and processing)</p>
<ul>
<li><a href="https://docs.aws.amazon.com/lambda/latest/dg/getting-started.html">https://docs.aws.amazon.com/lambda/latest/dg/getting-started.html</a></li>
<li><a href="https://console.aws.amazon.com/lambda/home?region=us-east-1#/functions">https://console.aws.amazon.com/lambda/home?region=us-east-1#/functions</a></li>
</ul>
<p>DynamoDB (key-value database)</p>
<ul>
<li><a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Introduction">https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Introduction</a></li>
</ul>
<p>S3 (object storage)</p>
<ul>
<li><a href="https://s3.console.aws.amazon.com/s3/home?region=us-east-1">https://s3.console.aws.amazon.com/s3/home?region=us-east-1</a></li>
</ul>
</section>

<section id="case-study-2" class="title-slide slide level1 center">
<h1>Case study</h1>
<p>Given a dataset of sales per customer</p>
<p>find the products frequently bought together</p>
<p>Dataset sample</p>
<p>%%%%%%%%%%%%%%</p>
<p>[ { customerName: Alice, products: [Pizza, Beer, Diaper] },</p>
<p>{ customerName: Bob, products: [Pizza, Beer, Diaper] },</p>
<p>{ customerName: Charlie, products: [Pizza, Cola] } ]</p>
<p>The pipeline involves a single transformation</p>
<ul>
<li>A classic mining problem, which one?</li>
</ul>
</section>

<section id="frequent-itemset-mining" class="title-slide slide level1 center">
<h1>Frequent itemset mining</h1>
<p>Dataset sample</p>
<p>%%%%%%%%%%%%%%</p>
<p>[[Pizza, Beer, Diaper],</p>
<p>[Pizza, Beer, Diaper],</p>
<p>[Pizza, Cola]]</p>
<p>Find sets of items (i.e., itemsets) frequently appearing together</p>
<ul>
<li><strong>Item</strong>: a product</li>
<li><strong>Itemset</strong>: a set of products</li>
<li><strong>Frequently</strong>: support above threshold</li>
<li><strong>Support</strong>: number of clients buying a set of products</li>
</ul>
<p>Complexity: O(2|items|)</p>
<p>{Pizza,Diaper,Beer}</p>
</section>

<section id="case-study-3" class="title-slide slide level1 center">
<h1>Case study</h1>
<p>Processed dataset sample</p>
<p>%%%%%%%%%%%%%%</p>
<p>[[Pizza, Beer, Diaper],</p>
<p>[Pizza, Beer, Diaper],</p>
<p>[Pizza, Cola]]</p>
<p>Raw dataset sample</p>
<p>%%%%%%%%%%%%%%</p>
<p>[ { customerName: Alice, products: [Pizza, Beer, Diaper] },</p>
<p>{ customerName: Bob, products: [Pizza, Beer, Diaper] },</p>
<p>{ customerName: Charlie, products: [Pizza, Cola] } ]</p>
</section>

<section id="reference-pipeline" class="title-slide slide level1 center">
<h1>Reference pipeline</h1>
<p><img data-src="imgs/slides375.png"></p>
<p><img data-src="imgs/slides376.png"></p>
</section>

<section id="nosql-storage-dynamodb" class="title-slide slide level1 center">
<h1>NOSQL storage: DynamoDB</h1>
<p>Basic DynamoDB components: tables and items</p>
<ul>
<li><strong>Tables</strong>, collection of (data) items</li>
</ul>
<p><strong>Items</strong>, a group of attributes that is uniquely identifiable</p>
<ul>
<li>Each table contains zero or more items
<ul>
<li>No limit to the number of items you can store in a table</li>
</ul></li>
<li>Each item in the table has a unique identifier, or primary key</li>
<li>E.g., in the table <code>people</code>, each item represents a <code>person</code>
<ul>
<li>The primary key consists of one attribute (<code>fiscalCode</code>)</li>
</ul></li>
</ul>
<p>Attributes</p>
<ul>
<li>A data element that is not broken down any further
<ul>
<li>E.g., an item in the <code>people</code> table contains attributes <code>fiscalCode</code> and <code>lastName</code></li>
</ul></li>
<li>Most of the attributes are scalar (have only one value)</li>
<li>Some of the items have a nested attribute (<code>address</code>) up to 32 levels deep</li>
</ul>
<p>Schemaless</p>
<ul>
<li>Other than the primary key, a table is schemaless
<ul>
<li>Neither the attributes nor their data types need to be defined beforehand</li>
<li>Each item can have its own distinct attributes</li>
</ul></li>
</ul>
<p>Primary Key</p>
<ul>
<li>To create a table, you must specify the primary key of the table</li>
<li>No two items can have the same key</li>
</ul>
<p>Two types of primary keys</p>
<ul>
<li>Partition key: a simple primary key composed of one attribute (partition key)
<ul>
<li>Keys are inputs to an internal hash function</li>
<li>The hash function determines the physical partition in which the item will be stored</li>
<li>E.g., access any item in the <code>people</code> table directly by providing the <code>fiscalCode</code></li>
</ul></li>
<li>Composite primary key: partition key and sort key (two attributes)
<ul>
<li>First attribute is the partition key</li>
<li>Second attribute is the sort key</li>
<li>Items in same partition key value are stored together and sorted by sort key</li>
</ul></li>
</ul>

<img data-src="imgs/slides377.png" class="r-stretch"><p><a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/bp-gsi-overloading.html">https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/bp-gsi-overloading.html</a></p>
<p>Secondary Indexes</p>
<ul>
<li>One or more secondary indexes per table</li>
<li>Indexes are automatically maintained on add, update, or delete</li>
<li>Query data using an alternate key (additionally to queries against primary key)</li>
</ul>
<p>Two types of indexes</p>
<ul>
<li>Global secondary has partition and sort keys different from those on table</li>
<li>Local secondary has the same partition key but a different sort key</li>
<li>Each table has a limited quota of 20 global and 5 local indexes</li>
</ul>
<p>How do we shape the schema?</p>
<ul>
<li><a href="https://cloud.google.com/bigtable/docs/schema-design">https://cloud.google.com/bigtable/docs/schema-design</a></li>
</ul>
<p>Create a table <code>frequent-sales</code> with a composite key</p>
<ul>
<li><code>dataset</code>: String</li>
<li><code>timestamp</code>: String</li>
</ul>
<p>$ aws dynamodb create-table \</p>
<p>–table-name frequent-sales \</p>
<p>–attribute-definitions AttributeName=dataset,AttributeType=S AttributeName=timestamp,AttributeType=S \</p>
<p>–key-schema AttributeName=dataset,KeyType=HASH AttributeName=timestamp,KeyType=RANGE \</p>
<p>–provisioned-throughput ReadCapacityUnits=1,WriteCapacityUnits=1</p>
<p>$ aws dynamodb list-tables</p>
<p>$ aws dynamodb delete-table –table-name frequent-sales</p>
<p>Reading data from DynamoDB might not reflect the results of a recent write</p>
<ul>
<li>Eventually Consistent Reads (default)</li>
<li>Response might include stale data</li>
<li>After short time, the response should return the latest data</li>
</ul>
<p>Strongly Consistent Reads</p>
<ul>
<li>Response includes the most up-to-date data</li>
<li>A strongly consistent read might not be available if there is a network delay or outage
<ul>
<li>In this case, DynamoDB may return a server error (HTTP 500)</li>
</ul></li>
<li>Strongly consistent reads may have higher latency than eventually consistent reads</li>
<li>Strongly consistent reads are not supported on global secondary indexes</li>
</ul>
<p>Provisioned mode: specify the #reads and #writes per second</p>
<ul>
<li>You have predictable application traffic or traffic ramps gradually</li>
<li>You can forecast capacity requirements to control costs</li>
</ul>
<p>One read capacity unit</p>
<ul>
<li>One strongly consistent read per second, two eventually consistent reads per second</li>
<li>RCUs also depend on the item size (a read is up to 4 KB in size), if item size is 8 KB
<ul>
<li>2 RCUs to sustain one strongly consistent read per second</li>
<li>1 RCU if you choose eventually consistent reads</li>
</ul></li>
</ul>
<p>One write capacity unit represents one write per second for an item up to 1 KB in size</p>
<p>Put a new item and get it back</p>
<p>$ aws dynamodb put-item –table-name frequent-sales –item ‘{“dataset”: {“S”: “sales”}, “timestamp”: {“S”: “1611226870”}, “bar”: {“S”: “foobar”}}’</p>
<p>$ aws dynamodb query –table-name frequent-sales –key-condition-expression “dataset =:n” –expression-attribute-values ‘{“:n”:{“S”:“sales”}}’</p>
</section>

<section id="lambda-create-a-function" class="title-slide slide level1 center">
<h1>Lambda: create a function</h1>

<img data-src="imgs/slides378.png" class="r-stretch"><p><a href="https://console.aws.amazon.com/lambda/home?region=us-east-1#/functions">https://console.aws.amazon.com/lambda/home?region=us-east-1#/functions</a></p>
</section>

<section id="lambda-attaching-a-role" class="title-slide slide level1 center">
<h1>Lambda: attaching a role</h1>
<p><img data-src="imgs/slides379.png"></p>
<p><img data-src="imgs/slides380.png"></p>
<p><img data-src="imgs/slides381.png"></p>
<p><img data-src="imgs/slides382.png"></p>
<p><img data-src="imgs/slides383.png"></p>
</section>

<section id="lambda-create-a-function-1" class="title-slide slide level1 center">
<h1>Lambda: create a function</h1>

<img data-src="imgs/slides384.png" class="r-stretch"><p><a href="https://console.aws.amazon.com/lambda/home?region=us-east-1#/functions">https://console.aws.amazon.com/lambda/home?region=us-east-1#/functions</a></p>
<p>Manually creating the functions is cumbersome</p>
<ul>
<li>We must copy and paste code</li>
<li>No automatic testing</li>
<li>No debugging</li>
<li>No IDE support (and not all languages are supported)</li>
</ul>
<p>Switch to IntelliJ IDEA + AWS Toolkit</p>
</section>

<section id="aws-toolkit" class="title-slide slide level1 center">
<h1>AWS Toolkit</h1>
<ul>
<li>Get the latest IntelliJ IDEA</li>
<li>Install the <code>AWS Toolkit</code></li>
<li>Copy the credentialscp ~/.aws/credentials ~/.aws/config</li>
<li>Clone the repo git clone <a href="https://github.com/w4bo/bigdata-aws/">https://github.com/w4bo/bigdata-aws/</a></li>
<li>Import <code>lab01-lambda</code> as a Gradle project</li>
<li>Verify that the project builds./gradlew</li>
</ul>
<p><img data-src="imgs/slides385.png"></p>
<p>Click on <code>AWS Explorer</code></p>
<ul>
<li>You can see the <code>helloworld</code> function</li>
<li>Plus <code>CloudWatch Logs</code> and <code>S3</code></li>
</ul>
<p><img data-src="imgs/slides386.png"></p>
<p>Test the existing code locally</p>
<ul>
<li>With Gradle</li>
<li>Or with local Lambda execution</li>
</ul>
<p>Deploy a new Lambda function from the existing code</p>
<ul>
<li>Right click on AWS Explorer &gt; Lambda</li>
<li>Select <code>Create new AWS Lambda...</code></li>
<li>Populate the settings</li>
<li><code>Create the function</code></li>
</ul>
<p><img data-src="imgs/slides387.png"></p>
<p><a href="https://aws.amazon.com/lambda/pricing/">https://aws.amazon.com/lambda/pricing/</a></p>
<p>Check the log for errors and pricing</p>
<ul>
<li>AWS Toolkit &gt; CloudWatch Logs</li>
<li>Double click on the function name</li>
<li>Double click on the log entry</li>
</ul>
<p><img data-src="imgs/slides388.png"></p>
<p><img data-src="imgs/slides389.png"></p>
</section>

<section id="data-pipeline" class="title-slide slide level1 center">
<h1>Data pipeline</h1>
<p>Deploy and execute the HelloWorld.java lambda function</p>
<ul>
<li>Given the created storage: S3 and DynamoDB</li>
<li>Deploy the function <code>FIM</code></li>
<li>Deploy the function <code>Preprocess</code></li>
<li>Run <code>ReadDataset.java</code></li>
<li>Check that the table <code>frequent-sales</code> has the FIs for the dataset <code>sales</code></li>
</ul>
<p>Some hints</p>
<ul>
<li>Function names are case sensitive</li>
<li>Some function need more than 128MB of memory
<ul>
<li>Behold! The higher the RAM, the higher the costs</li>
</ul></li>
</ul>
</section>

<section id="section-4" class="title-slide slide level1 center">
<h1></h1>
<p><img data-src="imgs/slides390.png"></p>
<p><img data-src="imgs/slides391.png"></p>
<div class="quarto-auto-generated-content">
<div class="footer footer-default">
<p>Matteo Francia - Big Data and Cloud Platforms (Module 2) - A.Y. 2024/25</p>
</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="slides_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="slides_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="slides_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="slides_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="slides_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="slides_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="slides_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="slides_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="slides_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="slides_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1100,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>