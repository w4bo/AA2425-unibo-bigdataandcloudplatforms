<!DOCTYPE html>
<html lang="en"><head>
<script src="06-storage_files/libs/quarto-html/tabby.min.js"></script>
<script src="06-storage_files/libs/quarto-html/popper.min.js"></script>
<script src="06-storage_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="06-storage_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="06-storage_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="06-storage_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="06-storage_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.549">

  <meta name="author" content="Matteo Francia   DISI — University of Bologna   m.francia@unibo.it">
  <title>Big Data and Cloud Platforms (Module 2)</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="06-storage_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="06-storage_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="06-storage_files/libs/revealjs/dist/theme/quarto.css">
  <link href="06-storage_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="06-storage_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="06-storage_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="06-storage_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Big Data and Cloud Platforms (Module 2)</h1>
  <p class="subtitle">Data pipelines on cloud (Storage)</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Matteo Francia <br> DISI — University of Bologna <br> m.francia@unibo.it 
</div>
</div>
</div>

</section>
<section id="data-pipeline" class="title-slide slide level1 center">
<h1>Data pipeline</h1>
<p>Data pipeline</p>
<ul>
<li>“A <em>sequence</em> of operations to transform and consume raw data”</li>
</ul>

<img data-src="imgs/slides180.png" class="r-stretch quarto-figure-center"><p class="caption">https://xkcd.com/2054/</p><p>Quemy, Alexandre. “Data Pipeline Selection and Optimization.” <em>DOLAP</em> . 2019.</p>
</section>

<section id="data-pipeline---aws" class="title-slide slide level1 center">
<h1>Data pipeline - AWS</h1>
<div class="columns">
<div class="column" style="width:60%;">
<p>Three main categories</p>
<ul>
<li>Ingest
<ul>
<li>Gateway, DataSync (batch)</li>
<li>Kinesis, SNS, SQS (stream)</li>
</ul></li>
<li>Transform and store
<ul>
<li>S3 and Glacier (storage)</li>
<li>Glue (ETL)</li>
</ul></li>
<li>Serve and consume
<ul>
<li>EMR (Hadoop-like cluster)</li>
<li>Athena (serverless query service to analyze data in Amazon S3)</li>
<li>(Many) Machine learning services</li>
</ul></li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/slides181.png"></p>
</div>
</div>
<p><a href="https://console.aws.amazon.com/console">https://console.aws.amazon.com/console</a></p>
</section>

<section id="data-pipeline---google-cloud" class="title-slide slide level1 center">
<h1>Data pipeline - Google cloud</h1>
<div class="columns">
<div class="column" style="width:60%;">
<p>Three main categories</p>
<ul>
<li>Ingest
<ul>
<li>Transfer service (batch)</li>
<li>Pub/Sub (stream)</li>
</ul></li>
<li>Analyze
<ul>
<li>Dataproc (batch)</li>
<li>Dataflow (stream)</li>
<li>Cloud storage (storage)</li>
<li>Machine learning services</li>
</ul></li>
<li>Serve
<ul>
<li>BigQuery (query service)</li>
</ul></li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/slides182.png"></p>
</div>
</div>
</section>

<section id="a-tentative-organization" class="title-slide slide level1 center">
<h1>A tentative organization</h1>

<img data-src="imgs/245.svg" class="r-stretch"></section>

<section id="a-tentative-organization-1" class="title-slide slide level1 center">
<h1>A tentative organization</h1>
<div class="columns">
<div class="column" style="width:60%;">
<p>We have services</p>
<ul>
<li>To transform data</li>
<li>To support the transformation</li>
</ul>
<p>The (DIKW) pyramid abstracts many techniques and algorithms</p>
<ul>
<li>Standardization</li>
<li>Integration</li>
<li>Orchestration</li>
<li>Accessibility through APIs</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/246.svg"></p>
</div>
</div>
</section>

<section id="a-tentative-organization-2" class="title-slide slide level1 center">
<h1>A tentative organization</h1>
<div class="columns">
<div class="column" style="width:60%;">
<p>This is not a sharp taxonomy</p>
<p>Ingestion vs Analytics</p>
<ul>
<li>Data streams are used for ingestion</li>
<li>… and (event) processing</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/248.svg"></p>
</div>
</div>
</section>

<section id="a-tentative-organization-3" class="title-slide slide level1 center">
<h1>A tentative organization</h1>
<div class="columns">
<div class="column" style="width:60%;">
<p>This is not a sharp taxonomy</p>
<p>Storage vs Serving</p>
<ul>
<li>Databases are storage</li>
<li>… with processing capability</li>
<li>… and with serving capability</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/249.svg"></p>
</div>
</div>
</section>

<section id="storage" class="title-slide slide level1 center">
<h1>Storage</h1>

<img data-src="imgs/249.svg" class="r-stretch"></section>

<section id="storage-1" class="title-slide slide level1 center">
<h1>Storage</h1>
<p><strong>Goal</strong>: persisting data</p>
<ul>
<li>Which storage do we choose?</li>
<li><strong>Storage model </strong> (or data model) ~= variety
<ul>
<li>How data are organized/accessed in a storage system
<ul>
<li>Structured vs unstructured</li>
<li>Data access model (key-value, column, etc.)</li>
</ul></li>
</ul></li>
<li>Access <strong>frequency</strong></li>
<li><strong>Analyses </strong> to be performed</li>
</ul>
</section>

<section id="storage-models" class="title-slide slide level1 center">
<h1>Storage models</h1>

<img data-src="imgs/252.svg" class="r-stretch"><p>Mansouri, Yaser, Adel Nadjaran Toosi, and Rajkumar Buyya. “Data storage management in cloud environments: Taxonomy, survey, and future directions.” ACM Computing Surveys (CSUR) 50.6 (2017): 1-51.</p>
</section>

<section id="storage-models-aws" class="title-slide slide level1 center">
<h1>Storage models (AWS)</h1>
<div class="columns">
<div class="column" style="width:60%;">
<p>Data structure: structured</p>
<p>Data abstraction: database</p>
<p>Data access model: relational</p>
<p><strong>Relational</strong></p>
<ul>
<li>Store data with predefined schemas and relationships between them</li>
<li>Support ACID transactions</li>
<li>Maintain referential integrity</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/253.svg"></p>
</div>
</div>
<p><a href="https://aws.amazon.com/products/databases/">https://aws.amazon.com/products/databases/</a></p>
</section>

<section id="storage-models-aws-1" class="title-slide slide level1 center">
<h1>Storage models (AWS)</h1>
<div class="columns">
<div class="column" style="width:60%;">
<p>Data structure: semi/unstructured</p>
<p>Data abstraction: database</p>
<p>Data access model: *</p>
<ul>
<li><strong>Key/value: </strong> store and retrieve large volumes of data</li>
<li><strong>Document: </strong> store semi-structured data as JSON-like documents</li>
<li><strong>Wide column:</strong> use tables but unlike a relational database, columns can vary from row to row in the same table</li>
<li><strong>Graph: </strong> navigate and query relationships between highly connected datasets</li>
<li><strong>… and more</strong></li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/254.svg"></p>
</div>
</div>
<p><a href="https://aws.amazon.com/products/databases/">https://aws.amazon.com/products/databases/</a></p>
</section>

<section id="storage-models-google-cloud" class="title-slide slide level1 center">
<h1>Storage models (Google Cloud)</h1>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="imgs/slides188.png"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="imgs/slides189.png"></p>
</div>
</div>
<p><a href="https://cloud.google.com/products/databases">https://cloud.google.com/products/databases</a></p>
</section>

<section id="storage-models-aws-2" class="title-slide slide level1 center">
<h1>Storage models (AWS)</h1>
<p>Data structure: unstructured</p>
<p>Data abstraction: file (or database)</p>
<p>Data access model: key-value</p>
<p><strong>File system</strong> (EFS), <strong>object storage</strong> (S3) (or <strong>DB K-V</strong> ; e.g., DynamoDB)</p>
<ul>
<li>Handle unstructured data</li>
<li>… organized as files (or blob)</li>
<li>… accessed using a key-value</li>
</ul>
<p>Differ in the supported features</p>
<ul>
<li>E.g., maximum item size (DynamoDB: 400KB, S3: 5TB)</li>
<li>E.g., indexes, querying mechanisms, latency, etc.</li>
</ul>
</section>

<section id="aws-s3" class="title-slide slide level1 center">
<h1>AWS S3</h1>
<p>Simple Storage Service (S3)</p>
<ul>
<li>Serverless storage, save data as <strong>objects</strong> within <strong>buckets</strong></li>
<li>An <strong>object</strong> is composed of a file and any metadata that describes that file (e.g., <strong>object key</strong>)</li>
<li><strong>Buckets</strong> are logical containers for objects</li>
<li>You can have one or more buckets in your account</li>
<li>Control access for each bucket individually</li>
<li>Choose the geographical region where Amazon S3 will store the bucket and its contents</li>
</ul>
<p>Benefits</p>
<ul>
<li>Unified data architecture
<ul>
<li>Build a multi-tenant environment, where many users can bring their own data</li>
<li>Improve both cost and data governance over traditional solutions</li>
</ul></li>
<li>Decoupling of storage from compute and data processing
<ul>
<li>You can cost-effectively store all data types in their native formats</li>
<li>Then, launch transformations as you need</li>
</ul></li>
</ul>
</section>

<section id="storage-access-frequency-aws" class="title-slide slide level1 center">
<h1>Storage: access frequency (AWS)</h1>
<div class="columns">
<div class="column" style="width:60%;">
<p>24 storage (AWS S3) <strong>classes</strong></p>
<ul>
<li><strong>Standard</strong>: general purpose</li>
<li><strong>Infrequent</strong> (rapid) <strong>access</strong></li>
<li><strong>One Zone-IA</strong>: lower-cost option for infrequently accessed data that do not require high availability and resilience</li>
<li><strong>Glacier</strong>: low-cost storage class for data archiving, three retrieval options that range from a few minutes to hours</li>
<li><strong>Deep Glacier</strong>: long-term retention for data accessed once or twice in a year. E.g., retain data sets for 10 years or longer</li>
<li><strong>Intelligent-Tiering</strong>: move objects between access tiers when access patterns change</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/258.svg"></p>
</div>
</div>
<p><a href="https://aws.amazon.com/s3/storage-classes/">https://aws.amazon.com/s3/storage-classes/</a></p>
</section>

<section id="storage-access-frequency-aws-1" class="title-slide slide level1 center">
<h1>Storage: access frequency (AWS)</h1>
<div class="columns">
<div class="column" style="width:60%;">
<p><strong>Lifecycle</strong> configuration</p>
<ul>
<li>A set of rules that define actions that Amazon S3 applies to a group of objects</li>
</ul>
<p>Two types of actions:</p>
<ul>
<li><strong>Transition: </strong> when objects transition to another storage class. E.g., archive objects to the S3 Glacier storage class one year after creating them</li>
<li><strong>Expiration</strong>: when objects expire. Amazon S3 deletes expired objects on your behalf</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/259.svg"></p>
</div>
</div>
<p><a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lifecycle-mgmt.html">https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lifecycle-mgmt.html</a></p>
</section>

<section id="storage-access-frequency-google-cloud" class="title-slide slide level1 center">
<h1>Storage: access frequency (Google Cloud)</h1>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="imgs/slides192.png"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="imgs/slides193.png"></p>
</div>
</div>
<p><a href="https://cloud.google.com/blog/products/storage-data-transfer/archive-storage-class-for-coldest-data-now-available">https://cloud.google.com/blog/products/storage-data-transfer/archive-storage-class-for-coldest-data-now-available</a></p>
</section>

<section id="organizing-the-data-lake" class="title-slide slide level1 center">
<h1>Organizing the data lake</h1>
<div class="columns">
<div class="column" style="width:60%;">
<p>Having consistent principles on how to organize your data is important</p>
<ul>
<li>To build standardized pipelines with the same design with regard to where read/write data</li>
<li>Standardization makes it easier to manage your pipelines at scale</li>
<li>Helps data users search for data in the storage and understand exactly to find what they need</li>
<li>Decoupling storage from processing</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/261.svg"></p>
</div>
</div>
</section>

<section id="organizing-the-data-lake-1" class="title-slide slide level1 center">
<h1>Organizing the data lake</h1>
<div class="columns">
<div class="column" style="width:60%;">
<p>Landing area (LA)</p>
<ul>
<li>Save <em>raw data</em> from ingestion</li>
<li>Transient, data is not stored for long term</li>
</ul>
<p>Staging area (SA)</p>
<ul>
<li>Raw data goes through a set of common transformations: ensuring <em>basic quality</em> and making sure it <em>conforms to existing schemas</em> for this data source and then data is saved into SA</li>
</ul>
<p>Archive area (A)</p>
<ul>
<li>After saving into SA, raw data from LA should be <em>copied into the archive</em> to reprocess any given batch of data by simply copying it from AA into LA</li>
<li>Useful for debugging and testing</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/262.svg"></p>
</div>
</div>
</section>

<section id="organizing-the-data-lake-2" class="title-slide slide level1 center">
<h1>Organizing the data lake</h1>
<div class="columns">
<div class="column" style="width:60%;">
<p>Production area (PA)</p>
<ul>
<li>Apply the business logic to data from SA</li>
</ul>
<p>Pass-through job</p>
<ul>
<li>Copy data from SA to PA and then into DWH without applying any business logic</li>
<li>Optional, but having a data set in the data warehouse and PA that is an exact replica can be helpful when debugging any issues with the business logic</li>
</ul>
<p>Cloud data warehouse (DWH)</p>
<ul>
<li>Failed area (FA)</li>
<li>You need to be able to deal with all kinds of errors and failures</li>
<li>There might be bugs in the pipeline code, cloud resources may fail</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/263.svg"></p>
</div>
</div>
</section>

<section id="organizing-the-data-lake-3" class="title-slide slide level1 center">
<h1>Organizing the data lake</h1>
<table>
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Area</th>
<th style="text-align: center;">Permissions</th>
<th style="text-align: center;">Tier</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Landing</td>
<td style="text-align: center;">Ingestion applications can write<br>Scheduled pipelines can readData consumers can’t access</td>
<td style="text-align: center;">Hot</td>
</tr>
<tr class="even">
<td style="text-align: center;">Staging</td>
<td style="text-align: center;">Scheduled pipelines can read/write<br>Selected data consumers can read</td>
<td style="text-align: center;">Hot</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Production</td>
<td style="text-align: center;">Scheduled pipelines can read/writeSelected data consumers can read</td>
<td style="text-align: center;">Hot</td>
</tr>
<tr class="even">
<td style="text-align: center;">Archive</td>
<td style="text-align: center;">Scheduled pipelines can writeDedicated data reprocessing pipelines can read</td>
<td style="text-align: center;">Cold or archive</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Failed</td>
<td style="text-align: center;">Scheduled pipelines can writeDedicated data reprocessing pipelines can readData consumers don’t have access</td>
<td style="text-align: center;">Hot</td>
</tr>
</tbody>
</table>
</section>

<section id="organizing-the-data-lake-4" class="title-slide slide level1 center">
<h1>Organizing the data lake</h1>
<p>Use folders to organize data inside areas into a logical structure</p>
<ul>
<li><em>Namespace</em>
<ul>
<li>Logically group multiple pipelines together.</li>
</ul></li>
<li><em>Pipeline name</em>
<ul>
<li>Each data pipeline should have a name that reflects its purpose. For example
<ul>
<li>A pipeline that takes data from the LA, applies common processing steps, and saves data into SA</li>
<li>You will also have one for archiving data into AA</li>
</ul></li>
</ul></li>
<li><em>Data source name</em>
<ul>
<li>Ingestion layer will assign a name to each data source you bring into the platform</li>
</ul></li>
<li><em>BatchId</em>
<ul>
<li>Unique identifier for any batch of data that is saved into LA</li>
<li>E.g., Since only ingestion can write to LA, it is its responsibility to generate this identifier</li>
<li>A common choice for this type of an identifier is a Universally Unique Identifier (UUID)</li>
</ul></li>
</ul>
<p>Different areas will have slightly different folder structures</p>
<ul>
<li>/landing/ETL/sales<em>oracle</em>ingest/customers/01DFTFX89YDFAXREPJTR94</li>
</ul>
</section>

<section id="organizing-the-data-lake-5" class="title-slide slide level1 center">
<h1>Organizing the data lake</h1>
<p>However, alternative organizations are available</p>
<div class="columns">
<div class="column" style="width:60%;">
<blockquote>
<p>“A data lake is a central repository system for storage, processing, and analysis of raw data, in which the data is <strong>kept in its original format </strong> and is processed to be queried only when needed. It can store a <strong>varied amount of formats </strong> in big data ecosystems, from unstructured, semi-structured, to structured data sources.”</p>
<p>Couto et al., 2019</p>
</blockquote>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/266.svg"></p>
</div>
</div>
</section>

<section id="data-lakehouse" class="title-slide slide level1 center">
<h1>Data Lakehouse</h1>
<p>Combine the key benefits of data lakes and data warehouses</p>
<ul>
<li>Low-cost storage in an open format accessible by a variety of systems from the former</li>
<li>Powerful management and optimization features from the latter
<ul>
<li>ACID transactions, data versioning, auditing, indexing, caching, and query optimization.</li>
</ul></li>
</ul>
<p>Key question: can we combine these benefits in an effective way?</p>
<ul>
<li>Direct access means that they <strong>give up some aspects of data independence</strong>, which has been a cornerstone of relational DBMS design</li>
<li><strong>Lakehouses</strong> are an especially good fit for cloud environments with separate compute and storage**: different computing applications can run on-demand on separate computing nodes (e.g., a GPU cluster for ML) while directly accessing the same storage data</li>
</ul>
</section>

<section id="data-independence" class="title-slide slide level1 center">
<h1>Data Independence</h1>
<div class="columns">
<div class="column" style="width:60%;">
<p>Data independence can be explained using the three-schema architecture</p>
<ul>
<li>Data independence: modify the schema at one level of the database system without altering the schema at the next higher level</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/slides194.png"></p>
</div>
</div>
</section>

<section id="data-lakehouse-1" class="title-slide slide level1 center">
<h1>Data Lakehouse</h1>
<p><strong>1st generation systems</strong>: data warehousing started with helping business leaders get analytical insights</p>
<ul>
<li>Data in these warehouses would be written with <em>schema-on-write</em>, which ensured that the data model was optimized for downstream BI consumption</li>
<li>Several challenges
<ul>
<li>They typically coupled compute and storage into an on-premises appliance
<ul>
<li>This forced enterprises to provision and pay for the peak of user load and data under management, very costly</li>
</ul></li>
<li>More and more datasets were completely unstructured, which DWHs could not store and query at all</li>
</ul></li>
</ul>
<p>Armbrust, Michael, et al.&nbsp;“Lakehouse: a new generation of open platforms that unify data warehousing and advanced analytics.” <em>CIDR</em> . 2021.</p>
</section>

<section id="data-lakehouse-2" class="title-slide slide level1 center">
<h1>Data Lakehouse</h1>
<p><strong>2nd generation</strong>: offloading all the raw data into data lakes</p>
<ul>
<li>The data lake is <em>schema-on-read</em> and stores any data at low cost, but on the other hand, punted the problem of data quality and governance</li>
<li>In this architecture, a small subset of data in the lake would later be ETLed to a downstream data warehouse</li>
<li>The use of open formats also made data lake data directly accessible to a wide range of other analytics engines, such as machine learning systems</li>
<li>From 2015 onwards, cloud data lakes, such as S3, ADLS and GCS, started replacing HDFS
<ul>
<li>Superior durability (often &gt;10 nines), geo-replication, and most importantly, extremely low cost</li>
</ul></li>
</ul>
</section>

<section id="data-lakehouse-3" class="title-slide slide level1 center">
<h1>Data Lakehouse</h1>

<img data-src="imgs/slides195.png" class="r-stretch"></section>

<section id="data-lakehouse-4" class="title-slide slide level1 center">
<h1>Data Lakehouse</h1>
<p>While the cloud data lake and warehouse architecture is ostensibly cheap, a two-tier architecture is highly complex for users</p>
<ul>
<li>Data is first ETLed into lakes, and then again ELTed into warehouses</li>
<li>Enterprise use cases now include advanced analytics such as machine learning, for which neither data lakes nor warehouses are ideal</li>
<li>(Some) main problems:
<ul>
<li><strong>Reliability</strong> . Keeping the data lake and warehouse consistent is difficult and costly</li>
<li>Data <strong>staleness</strong> . The data in the warehouse is stale compared to that of the data lake, with new data frequently taking days to load</li>
<li><strong>Limited support for advanced analytics</strong> . Businesses want to ask predictive questions using their warehousing data, e.g., “which customers should I offer discounts to?” None of the leading machine learning systems directly work well on top of warehouses
<ul>
<li>Process large datasets using complex non-SQL code</li>
</ul></li>
</ul></li>
</ul>
</section>

<section id="dataset-search-for-data-discovery-augmentation-and-explanation" class="title-slide slide level1 center">
<h1>Dataset Search for Data Discovery, Augmentation, and Explanation</h1>
<p>Is there a real need for many unstructured and integrated dataset?</p>
<ul>
<li>Recent years have seen an explosion in our ability to collect and catalog immense amounts of data about our environment, society, and populace</li>
<li>Governments, and organizations are increasingly making structured data available on the Web and in various repositories and data lakes</li>
<li><strong>This opportunity is often missed due to a central technical barrier</strong>: it is currently nearly impossible for domain experts to weed through the vast amount of available information to discover datasets that are needed for their specific application</li>
</ul>
<p>Juliana Freire, keynote @ EDBT 2023</p>
</section>

<section id="data-lakehouse-5" class="title-slide slide level1 center">
<h1>Data Lakehouse</h1>
<p>Main features</p>
<ul>
<li><strong>Store data in a low-cost object store</strong> using a standard file format such as Apache Parquet</li>
<li><strong>Implement a transactional metadata layer</strong> on top of the object store that defines which objects are part of a table version</li>
<li><strong>Implement management features </strong> within the metadata layer</li>
</ul>
<p>Challenges:</p>
<ul>
<li>The metadata layer is insufficient to achieve good SQL performance
<ul>
<li><strong>Data warehouses use several techniques to get state-of-the-art performance</strong>
<ul>
<li>Storing hot data on fast devices such as SSDs, maintaining statistics, building efficient indexes, etc.</li>
</ul></li>
<li><strong>In a Lakehouse it is not possible to change the format</strong>, but it is possible to implement other optimizations that leave the data files unchanged</li>
</ul></li>
</ul>
</section>

<section id="delta-lake" class="title-slide slide level1 center">
<h1>Delta Lake</h1>
<p><strong>Challenges</strong>:</p>
<ul>
<li>Most <strong>cloud object stores are merely key-value stores</strong>, with no cross-key consistency</li>
<li><strong>Multi-object updates are not atomic</strong>, there is no isolation between queries
<ul>
<li>If a query needs to update multiple objects in the table readers will see partial updates as the query updates each object individually</li>
</ul></li>
<li>For large tables with millions of objects, <strong>metadata operations are expensive</strong>
<ul>
<li>The latency of cloud object stores is so much higher that these data skipping checks can take longer than the actual query</li>
</ul></li>
</ul>
<p>Armbrust, Michael, et al.&nbsp;“Delta lake: high-performance ACID table storage over cloud object stores.” Proceedings of the VLDB Endowment 13.12 (2020): 3411-3424.</p>
</section>

<section id="delta-lake-1" class="title-slide slide level1 center">
<h1>Delta Lake</h1>
<div class="columns">
<div class="column" style="width:60%;">
<p>Delta Lake uses a <strong>transaction log </strong> that is compacted <strong>into Apache Parquet </strong> for significantly faster metadata operations for large tabular datasets</p>
<ul>
<li>E.g., quickly search billions of table partitions for those relevant to a query</li>
<li>The log is stored in the **delta*log** subdirectory within the table</li>
<li>It contains
<ul>
<li>Sequence of JSON objects with increasing, zero-padded numerical IDs to store the log records</li>
<li>Occasional checkpoints for specific log objects that summarize the log up to that point</li>
</ul></li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="imgs/slides196.png"></p>
</div>
</div>
</section>

<section id="delta-lake-2" class="title-slide slide level1 center">
<h1>Delta Lake</h1>
<p>Each log record object (e.g., 000003.json) contains an array of actions to apply to the previous version of the table to generate the next one</p>
<ul>
<li>Examples of actions are:</li>
<li>Change Metadata</li>
<li>Add or Remove Files</li>
</ul>
<p>It is necessary to compress the log periodically into checkpoints</p>
<ul>
<li>Checkpoints store all the non-redundant actions in the table’s log up to a certain log record ID, in Parquet format</li>
<li>Some sets of actions are redundant and can be removed</li>
<li>Read the <em>last</em>checkpoint object in the table’s log directory, if it exists, to obtain a recent checkpoint ID</li>
</ul>
</section>

<section id="delta-lake-3" class="title-slide slide level1 center">
<h1>Delta Lake</h1>
<p>Example of a write transaction</p>
<ul>
<li>Transaction will read the data at table version r (if needed) and attempt to write log record r+1</li>
<li>Read data at table version r, if required combine previous checkpoint and further log records</li>
<li>Write any new data objects that the transaction aims to add to the table into new files in the correct data directories, generating the object names using GUIDs.
<ul>
<li>This step can happen in parallel</li>
<li>At the end, these objects are ready to be referenced in a new log record.</li>
</ul></li>
<li>Attempt to write the transaction’s log record into the r+1 .json log object, if no other client has written this object</li>
<li><strong>This step needs to be atomic</strong> . If the step fails, the transaction can be retried; depending on the query’s semantics (optimistic concurrency)</li>
<li>Optionally, write a new .parquet checkpoint for log record r+1</li>
</ul>
<p>Creating the r+1 .json record, needs to be atomic: only 1 client should succeed. Not all large-scale storage systems have an atomic put operation</p>
<ul>
<li>Google Cloud Storage and Azure Blob Store support atomic put-if-absent operations</li>
<li>HDFS, we use atomic renames to rename a temporary file to the target name</li>
<li>Amazon S3 need ad-hoc protocols</li>
</ul>
</section>

<section id="lakehouse" class="title-slide slide level1 center">
<h1>Lakehouse</h1>
<p>(SQL) Format-independent optimizations are</p>
<ul>
<li><strong>Caching</strong>: When using a transactional metadata layer such as Delta Lake, it is safe for a Lakehouse system to cache files from the cloud object store on faster storage devices such as SSDs and RAM on the processing nodes</li>
<li><strong>Auxiliary data</strong>: maintain column min-max statistics for each data file in the table within the same Parquet file used to store the transaction log, which enables data skipping optimizations when the base data is clustered by particular columns</li>
<li><strong>Data layout</strong>:
<ul>
<li>Record ordering: which records are clustered together and hence easiest to read together, e.g.&nbsp;ordering records using individual dimensions or space-filling curves such as Z-order</li>
<li>Compression strategies differently for various groups of records, or other strategies</li>
</ul></li>
</ul>
<p>Offer a declarative version of the DataFrame APIs which maps data preparation computations into Spark SQL query plans and can benefit from logical optimizations</p>
<div class="quarto-auto-generated-content">
<div class="footer footer-default">
<p>Matteo Francia - Big Data and Cloud Platforms (Module 2) - A.Y. 2024/25</p>
</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="06-storage_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="06-storage_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="06-storage_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="06-storage_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="06-storage_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="06-storage_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="06-storage_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="06-storage_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="06-storage_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="06-storage_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1100,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>